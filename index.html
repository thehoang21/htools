<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <!-- Viewport fit cover để hỗ trợ các thiết bị tràn viền -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <!-- PWA Manifest & Meta -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HTools">
    <link rel="apple-touch-icon" href="images/appstore.PNG">

    <title>HTools</title>

    <!-- Leaflet CSS & JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    keyframes: {
                        fadeInZoom: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        }
                    },
                    animation: {
                        'in': 'fadeInZoom 0.1s ease-out forwards',
                        'fade-in': 'fadeInZoom 0.2s ease-out forwards',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Google Material Symbols -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Docx & FileSaver -->
    <script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="icon" type="image/png" href="./images/playstore.png">
    <link rel="stylesheet" href="style.css">

    <style>
                /* Áp dụng safe-area cho sidebar/menu */
                @supports(padding-top: env(safe-area-inset-top)) {
                    #sidebar {
                        padding-top: env(safe-area-inset-top);
                    }
                }

                /* Cố định header/navbar khi scroll */
                .fixed-header {
                    position: sticky;
                    top: 0;
                    z-index: 30;
                    background: white;
                }
        /* Các utility bổ sung cho Material Symbols để căn chỉnh tốt hơn với Tailwind */
        .material-symbols-outlined {
            font-size: 20px;
            vertical-align: middle;
            user-select: none;
        }

        .text-\[16px\] {
            font-size: 18px !important;
        }

        /* Safe area cho Dynamic Island iOS */
        @supports(padding-top: env(safe-area-inset-top)) {
            .safe-area-top {
                padding-top: env(safe-area-inset-top);
            }
        }
    </style>
</head>

<body
    class="h-screen overflow-hidden flex bg-slate-50 text-slate-900 font-sans antialiased selection:bg-blue-100 selection:text-blue-700 safe-area-top">

    <!-- Mobile Overlay Backdrop -->
    <div id="mobileOverlay" onclick="toggleMobileSidebar()"
        class="fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40 hidden xl:hidden transition-opacity duration-300">
    </div>

    <!-- CUSTOM CONFIRM MODAL -->
    <div id="resetModal" class="fixed inset-0 z-[60] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity opacity-0 duration-300"
            id="resetModalBackdrop" onclick="closeResetModal()"></div>
        <div class="relative w-full max-w-[320px] sm:max-w-sm bg-white rounded-2xl shadow-2xl transform scale-95 opacity-0 transition-all duration-200"
            id="resetModalPanel">
            <div class="p-6 text-center">
                <div
                    class="w-14 h-14 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 ring-8 ring-red-50/50">
                    <span class="material-symbols-outlined text-[32px] text-red-500">warning</span>
                </div>
                <h3 class="text-lg font-bold text-slate-800 mb-2">Đặt lại dữ liệu?</h3>
                <p class="text-[13px] sm:text-sm text-slate-500 mb-6 leading-relaxed">
                    Hành động này sẽ xóa toàn bộ cấu hình giờ làm và dữ liệu tính công đã lưu trên trình duyệt này.
                </p>
                <div class="flex gap-3">
                    <button onclick="closeResetModal()"
                        class="flex-1 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-semibold rounded-xl transition-colors active:scale-95">Hủy
                        bỏ</button>
                    <button onclick="confirmReset()"
                        class="flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white text-sm font-semibold rounded-xl shadow-lg shadow-red-200 transition-all active:scale-95">Đồng
                        ý</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SIDEBAR -->
    <!-- Thêm class 'group' để xử lý logic collapsed bằng Tailwind variants -->
    <aside id="sidebar"
        class="group fixed xl:static inset-y-0 left-0 z-50 bg-white border-r border-slate-200 flex flex-col w-64 transition-[width,transform] duration-300 cubic-bezier(0.4,0,0.2,1) transform -translate-x-full xl:translate-x-0 shadow-xl xl:shadow-none h-full">
        <!-- Collapse Button (Desktop Only) -->
        <button onclick="toggleSidebarCollapse()"
            class="hidden xl:flex absolute -right-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-white border border-slate-200 rounded-full items-center justify-center text-slate-400 hover:text-blue-600 hover:border-blue-400 shadow-sm z-50 transition-all focus:outline-none hover:scale-110 active:scale-95">
            <span id="collapseIcon" class="material-symbols-outlined text-[16px]">chevron_left</span>
        </button>

        <div
            class="h-16 flex items-center justify-between px-5 border-b border-slate-100 shrink-0 overflow-hidden whitespace-nowrap bg-white group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0 fixed-header">
            <div class="flex items-center gap-3 group-[.sidebar-collapsed]:gap-0 transition-all duration-200">
                <div
                    class="w-9 h-9 rounded-xl bg-blue-600 flex items-center justify-center text-white shrink-0 shadow-lg shadow-blue-600/20">
                    <span class="material-symbols-outlined text-[22px]">build</span>
                </div>
                <div
                    class="flex flex-col transition-all duration-200 opacity-100 w-auto group-[.sidebar-collapsed]:opacity-0 group-[.sidebar-collapsed]:w-0 group-[.sidebar-collapsed]:overflow-hidden">
                    <span class="font-bold text-lg text-slate-800 tracking-tight leading-tight">HTools</span>
                    <span class="text-[10px] font-semibold text-slate-400 uppercase tracking-wider">Phiên bản 1.7</span>
                </div>
            </div>
            <!-- Mobile Close Button -->
            <button onclick="toggleMobileSidebar()"
                class="xl:hidden p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-50 rounded-lg transition-colors translate-x-[20px]">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <nav class="flex-1 overflow-y-auto py-6 px-3 space-y-1">
            <!-- Single Item: Trang chủ -->
            <button onclick="switchTab('home')" id="nav-home"
                class="nav-item active w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-left relative overflow-hidden text-slate-500 hover:bg-slate-50 hover:text-slate-900 [&.active]:bg-blue-50 [&.active]:text-blue-600 [&.active]:font-semibold group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0">
                <span class="material-symbols-outlined shrink-0">home</span>
                <span
                    class="font-medium text-sm whitespace-nowrap transition-all duration-200 group-[.sidebar-collapsed]:hidden">Trang
                    chủ</span>
            </button>

            <!-- Single Item: Thời gian -->
            <button onclick="switchTab('time')" id="nav-time"
                class="nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-left relative overflow-hidden text-slate-500 hover:bg-slate-50 hover:text-slate-900 [&.active]:bg-blue-50 [&.active]:text-blue-600 [&.active]:font-semibold group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0">
                <span class="material-symbols-outlined shrink-0">globe</span>
                <span
                    class="font-medium text-sm whitespace-nowrap transition-all duration-200 group-[.sidebar-collapsed]:hidden">Thời
                    gian</span>
            </button>

            <div class="my-2 border-t border-slate-100 mx-3 group-[.sidebar-collapsed]:mx-1"></div>

            <!-- Group: Tài chính -->
            <div>
                <button onclick="toggleSubmenu('submenu-finance')"
                    class="w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined shrink-0">account_balance_wallet</span>
                        <span class="font-medium text-sm whitespace-nowrap group-[.sidebar-collapsed]:hidden">Tài
                            chính</span>
                    </div>
                    <span id="arrow-submenu-finance"
                        class="material-symbols-outlined text-[20px] text-slate-400 transition-transform duration-300 group-[.sidebar-collapsed]:hidden">expand_more</span>
                </button>
                <div id="submenu-finance" class="sidebar-submenu hidden group-[.sidebar-collapsed]:hidden">
                    <div class="pl-4 space-y-1">
                        <button onclick="switchTab('calculator')" id="nav-calculator"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">pending_actions</span>
                            <span>Tính Công</span>
                        </button>
                        <button onclick="switchTab('salary')" id="nav-salary"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">payments</span>
                            <span>Tính Lương Tháng</span>
                        </button>
                        <button onclick="switchTab('tax')" id="nav-tax"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">calculate</span>
                            <span>Tính Thuế TNCN</span>
                        </button>
                        <button onclick="switchTab('compound')" id="nav-compound"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">savings</span>
                            <span>Lãi Suất Kép</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Group: Khám phá -->
            <div>
                <button onclick="toggleSubmenu('submenu-discovery')"
                    class="w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined shrink-0">explore</span>
                        <span class="font-medium text-sm whitespace-nowrap group-[.sidebar-collapsed]:hidden">Khám
                            phá</span>
                    </div>
                    <span id="arrow-submenu-discovery"
                        class="material-symbols-outlined text-[20px] text-slate-400 transition-transform duration-300 group-[.sidebar-collapsed]:hidden">expand_more</span>
                </button>
                <div id="submenu-discovery" class="sidebar-submenu hidden group-[.sidebar-collapsed]:hidden">
                    <div class="pl-4 space-y-1">
                        <button onclick="switchTab('worldmap')" id="nav-worldmap"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">map</span>
                            <span>Bản Đồ Thế Giới</span>
                        </button>
                        <button onclick="switchTab('countries')" id="nav-countries"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">flag</span>
                            <span>Thông Tin Quốc Gia</span>
                        </button>
                        <button onclick="switchTab('solar')" id="nav-solar"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">public</span>
                            <span>Khám Phá Hệ Mặt Trời</span>
                        </button>
                        <!-- Đã loại bỏ Mô Phỏng Vật Lý và Nhật/Nguyệt Thực -->
                    </div>
                </div>
            </div>

            <!-- Group: Tiện ích -->
            <div>
                <button onclick="toggleSubmenu('submenu-utilities')"
                    class="w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined shrink-0">extension</span>
                        <span class="font-medium text-sm whitespace-nowrap group-[.sidebar-collapsed]:hidden">Tiện
                            ích</span>
                    </div>
                    <span id="arrow-submenu-utilities"
                        class="material-symbols-outlined text-[20px] text-slate-400 transition-transform duration-300 group-[.sidebar-collapsed]:hidden">expand_more</span>
                </button>
                <div id="submenu-utilities" class="sidebar-submenu hidden group-[.sidebar-collapsed]:hidden">
                    <div class="pl-4 space-y-1">
                        <button onclick="switchTab('sorting')" id="nav-sorting"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">bar_chart</span>
                            <span>Biểu Diễn Thuật Toán</span>
                        </button>
                        <button onclick="switchTab('typing')" id="nav-typing"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">keyboard</span>
                            <span>Kiểm Tra Tốc Độ Gõ</span>
                        </button>
                        <button onclick="switchTab('bmi')" id="nav-bmi"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">monitor_weight</span>
                            <span>Công cụ tính BMI/BMR</span>
                        </button>
                        <button onclick="switchTab('password')" id="nav-password"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">lock</span>
                            <span>Tạo Mật Khẩu</span>
                        </button>
                        <button onclick="switchTab('diff')" id="nav-diff"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">difference</span>
                            <span>So Sánh Văn Bản</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Group: Hỗ Trợ Lập Trình -->
            <div>
                <button onclick="toggleSubmenu('submenu-programming')"
                    class="w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all group-[.sidebar-collapsed]:justify-center group-[.sidebar-collapsed]:px-0">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined shrink-0">code</span>
                        <span class="font-medium text-sm whitespace-nowrap group-[.sidebar-collapsed]:hidden">Lập
                            Trình</span>
                    </div>
                    <span id="arrow-submenu-programming"
                        class="material-symbols-outlined text-[20px] text-slate-400 transition-transform duration-300 group-[.sidebar-collapsed]:hidden">expand_more</span>
                </button>
                <div id="submenu-programming" class="sidebar-submenu hidden group-[.sidebar-collapsed]:hidden">
                    <div class="pl-4 space-y-1">
                        <button onclick="switchTab('json')" id="nav-json"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">data_object</span>
                            <span>JSON Formatter</span>
                        </button>
                        <button onclick="switchTab('css')" id="nav-css"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">css</span>
                            <span>Trình tạo CSS</span>
                        </button>
                        <button onclick="switchTab('regex')" id="nav-regex"
                            class="nav-item w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-500 hover:text-slate-900 hover:bg-slate-50 transition-all text-sm [&.active]:text-blue-600 [&.active]:font-medium [&.active]:bg-blue-50">
                            <span class="material-symbols-outlined text-[18px] shrink-0">regular_expression</span>
                            <span>Regex Tester</span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <div
            class="p-4 border-t border-slate-100 bg-slate-50/50 transition-all duration-200 group-[.sidebar-collapsed]:opacity-0 group-[.sidebar-collapsed]:w-0 group-[.sidebar-collapsed]:overflow-hidden group-[.sidebar-collapsed]:p-0">
            <div class="flex items-center gap-2 text-xs text-slate-400 whitespace-nowrap">
                <span class="material-symbols-outlined text-[14px]">verified_user</span>
                <span>Dữ liệu lưu trên máy bạn</span>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="flex-1 flex flex-col h-screen overflow-hidden w-full bg-slate-50 relative">
        <header
            class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 xl:px-8 shrink-0 shadow-sm z-30 sticky top-0">
            <div class="flex items-center gap-3">
                <!-- Mobile/Tablet Portrait Menu Button -->
                <button onclick="toggleMobileSidebar()"
                    class="xl:hidden p-2.5 -ml-2 rounded-lg hover:bg-slate-100 text-slate-600 active:bg-slate-200 transition-colors">
                    <span class="material-symbols-outlined">menu</span>
                </button>
                <h2 id="pageTitle"
                    class="text-lg font-bold text-slate-800 tracking-tight truncate max-w-[200px] sm:max-w-none xl:text-[1.125rem]">
                    Thời gian</h2>
            </div>
        </header>

        <main
            class="flex-1 overflow-y-auto p-4 xl:p-8 scroll-smooth pb-[env(safe-area-inset-bottom,20px)] relative xl:min-h-0">

            <!-- TAB: HOME -->
            <div id="tab-home"
                class="tab-content w-full h-full flex flex-col items-center justify-start text-center px-4 animate-fade-in overflow-y-auto">
                <div class="max-w-screen-xl mx-auto py-16 lg:py-24">
                    <h1
                        class="mb-6 text-4xl font-extrabold tracking-tight leading-none text-slate-900 md:text-5xl lg:text-6xl">
                        We invest in the world’s potential</h1>
                    <p class="mb-8 text-lg font-normal text-slate-500 lg:text-xl sm:px-16 xl:px-48 max-w-4xl mx-auto">
                        Here at Flowbite we focus on markets where technology, innovation, and capital can unlock
                        long-term value and drive economic growth.</p>
                    <div
                        class="flex flex-col mb-8 lg:mb-16 space-y-4 sm:flex-row sm:justify-center sm:space-y-0 sm:space-x-4">
                        <button onclick="switchTab('time')"
                            class="inline-flex justify-center items-center py-3 px-6 text-base font-medium text-center text-white rounded-lg bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 transition-colors">
                            Getting started
                            <span class="material-symbols-outlined ml-2 text-[20px]">arrow_forward</span>
                        </button>
                        <button onclick="switchTab('countries')"
                            class="inline-flex justify-center items-center py-3 px-6 text-base font-medium text-center text-slate-900 rounded-lg border border-slate-200 hover:bg-slate-50 focus:ring-4 focus:ring-slate-100 transition-colors bg-white">
                            Learn more
                        </button>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="max-w-screen-xl mx-auto px-4 pb-16">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Feature 1 -->
                        <div onclick="switchTab('calculator')"
                            class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all cursor-pointer group text-left">
                            <div
                                class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-blue-600 transition-colors">
                                <span
                                    class="material-symbols-outlined text-blue-600 text-[28px] group-hover:text-white transition-colors">pending_actions</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Tính Công</h3>
                            <p class="text-slate-500 text-sm">Công cụ tính toán ngày công, lương tháng và thuế thu nhập
                                cá nhân chính xác.</p>
                        </div>

                        <!-- Feature 2 -->
                        <div onclick="switchTab('countries')"
                            class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all cursor-pointer group text-left">
                            <div
                                class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-green-600 transition-colors">
                                <span
                                    class="material-symbols-outlined text-green-600 text-[28px] group-hover:text-white transition-colors">public</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Khám Phá Thế Giới</h3>
                            <p class="text-slate-500 text-sm">Tra cứu thông tin chi tiết về các quốc gia, dân số và vị
                                trí địa lý trên bản đồ.</p>
                        </div>

                        <!-- Feature 3 -->
                        <div onclick="switchTab('solar')"
                            class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all cursor-pointer group text-left">
                            <div
                                class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-purple-600 transition-colors">
                                <span
                                    class="material-symbols-outlined text-purple-600 text-[28px] group-hover:text-white transition-colors">rocket_launch</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Vũ Trụ & Khoa Học</h3>
                            <p class="text-slate-500 text-sm">Mô phỏng hệ mặt trời 3D và các thí nghiệm vật lý tương tác
                                trực quan.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 0: DASHBOARD -->
            <div id="tab-time" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <!-- Clock Section -->
                <div
                    class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex flex-col items-center justify-center text-center min-h-[200px] relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-50/50 to-transparent pointer-events-none">
                    </div>
                    <div class="relative z-10">
                        <div class="text-sm font-medium text-slate-500 uppercase tracking-widest mb-2" id="timeDate">
                            Loading date...</div>
                        <div class="text-6xl sm:text-7xl md:text-8xl font-bold text-slate-800 tracking-tighter font-mono"
                            id="timeClock">00:00:00</div>
                        <div
                            class="mt-2 flex items-center justify-center gap-2 text-blue-600 bg-blue-50 px-3 py-1 rounded-full text-xs font-semibold">
                            <span class="material-symbols-outlined text-[16px]">public</span>
                            <span>Giờ địa phương</span>
                        </div>
                    </div>
                </div>

                <!-- Map Section -->
                <div
                    class="bg-white rounded-xl border border-slate-200 shadow-sm p-1 overflow-hidden h-[650px] relative group">
                    <div id="homeWorldMap" class="w-full h-full rounded-lg z-0"></div>

                    <!-- Country Info Overlay (Hidden by default) -->
                    <div id="countryInfoOverlay"
                        class="absolute bottom-4 left-4 right-4 sm:right-auto sm:w-96 bg-white/90 backdrop-blur-md border border-slate-200 shadow-lg rounded-xl p-5 transform translate-y-[120%] transition-transform duration-300 z-[1000]">
                        <div class="flex items-start justify-between mb-3">
                            <h3 class="font-bold text-lg text-slate-800 flex items-start gap-2 leading-tight pr-6">
                                <span class="material-symbols-outlined text-blue-600 mt-0.5 shrink-0">flag</span>
                                <span id="overlayCountryName">Vietnam</span>
                            </h3>
                            <button onclick="closeCountryOverlay()"
                                class="text-slate-400 hover:text-slate-600 transition-colors shrink-0">
                                <span class="material-symbols-outlined text-[20px]">close</span>
                            </button>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center text-sm border-b border-slate-100 pb-2">
                                <span class="text-slate-500">Ngày hiện tại:</span>
                                <span class="font-medium text-slate-800" id="overlayDate">--/--/----</span>
                            </div>
                            <div class="flex justify-between items-center text-sm border-b border-slate-100 pb-2">
                                <span class="text-slate-500">Giờ hiện tại:</span>
                                <span class="font-bold text-blue-600 font-mono text-xl" id="overlayTime">--:--</span>
                            </div>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-slate-500">Múi giờ:</span>
                                <span class="font-medium text-slate-600 text-xs bg-slate-100 px-2 py-1 rounded"
                                    id="overlayTimezone">UTC</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 1: CALCULATOR -->
            <div id="tab-calculator" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tài chính</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tính Công & Lương</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Info Bar & Reset Button Row -->
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-2">
                    <div
                        class="flex items-center gap-2 text-xs font-medium text-blue-600 bg-white px-4 py-2.5 rounded-lg border border-blue-100 shadow-sm flex-1 w-full sm:w-auto">
                        <span class="material-symbols-outlined text-blue-500 text-sm">info</span>
                        <span>Dữ liệu được tự động lưu. Tính toán tức thì.</span>
                    </div>

                    <button onclick="showResetModal()"
                        class="group text-xs font-semibold flex items-center text-slate-600 hover:text-red-600 transition-colors px-3 py-2.5 border border-slate-200 rounded-lg bg-white hover:bg-red-50 shadow-sm active:scale-95 w-full sm:w-auto justify-center">
                        <span
                            class="material-symbols-outlined text-[18px] mr-1.5 transition-transform group-hover:rotate-180">restart_alt</span>
                        Đặt lại dữ liệu
                    </button>
                </div>

                <!-- Main Grid Layout -->
                <div class="grid grid-cols-1 xl:grid-cols-12 gap-5 xl:gap-8 relative">

                    <!-- Left Column: Inputs -->
                    <div class="xl:col-span-6 space-y-5 h-full">
                        <!-- Time Card -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 space-y-4">
                            <div class="flex items-center gap-2 mb-1 border-b pb-3 border-slate-300">
                                <div class="p-1.5 bg-blue-50 rounded text-blue-600">
                                    <span class="material-symbols-outlined text-[20px]">schedule</span>
                                </div>
                                <h3 class="font-semibold text-sm text-slate-900 uppercase tracking-wide">Thời gian làm
                                    việc</h3>
                            </div>
                            <!-- Sub-grid for inputs -->
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Giờ bắt đầu</label>
                                    <input type="time" id="startTime" value="07:30"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Giờ kết thúc</label>
                                    <input type="time" id="endTime" value="18:00"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Nghỉ trưa từ</label>
                                    <input type="time" id="breakStart" value="11:30"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Nghỉ trưa đến</label>
                                    <input type="time" id="breakEnd" value="13:00"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                            </div>
                        </div>

                        <!-- Parameters Card -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 space-y-4">
                            <div class="flex items-center gap-2 mb-1 border-b pb-3 border-slate-300">
                                <div class="p-1.5 bg-blue-50 rounded text-blue-600">
                                    <span class="material-symbols-outlined text-[20px]">tune</span>
                                </div>
                                <h3 class="font-semibold text-sm text-slate-900 uppercase tracking-wide">Thông số tính
                                    toán</h3>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Tính OT sau</label>
                                    <input type="time" id="otThreshold" value="17:00"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Hệ số OT</label>
                                    <input type="number" id="otCoeff" value="1.5" step="0.1" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Số ngày làm</label>
                                    <input type="number" id="workDays" value="27" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculate()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Giờ
                                        chuẩn/ngày</label>
                                    <input type="number" id="standardHours" value="8" readonly inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none bg-slate-50 text-slate-400 cursor-not-allowed border-dashed">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Results -->
                    <div class="xl:col-span-6 space-y-5 h-full">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <!-- Daily Result -->
                            <div
                                class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 flex flex-col justify-between hover:border-blue-300 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5">
                                <div>
                                    <div class="flex items-center gap-2 mb-3 border-b pb-4 border-slate-300">
                                        <span
                                            class="material-symbols-outlined text-blue-500 bg-blue-50 p-1.5 rounded-md">today</span>
                                        <h3 class="text-sm font-semibold text-slate-700">Kết quả 1 Ngày</h3>
                                    </div>
                                    <div
                                        class="text-2xl font-bold tracking-tight text-slate-900 mb-4 flex items-baseline gap-1">
                                        <span id="dailyCong" class="text-blue-600">-</span>
                                        <span class="text-base font-medium text-slate-400">công</span>
                                    </div>
                                </div>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between py-1 border-b border-slate-50">
                                        <span class="text-slate-500">Giờ thường</span>
                                        <span class="font-mono font-medium text-slate-700" id="dailyNormalMins">-</span>
                                    </div>
                                    <div class="flex justify-between py-1 border-b border-slate-50">
                                        <span class="text-slate-500">Giờ OT thực</span>
                                        <span class="font-mono font-medium text-slate-700" id="dailyOtRawMins">-</span>
                                    </div>
                                    <div class="flex justify-between py-1 pt-1">
                                        <span class="text-slate-500 font-medium">Tổng quy đổi</span>
                                        <span class="font-mono font-bold text-slate-900"
                                            id="dailyTotalConvertedMins">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Monthly Result -->
                            <div
                                class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 flex flex-col justify-between bg-gradient-to-br from-white to-green-50/50 border-green-100 hover:border-green-300 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5">
                                <div>
                                    <div class="flex items-center gap-2 mb-3 border-b pb-4 border-slate-300">
                                        <span
                                            class="material-symbols-outlined text-green-600 bg-green-100 p-1.5 rounded-md">calendar_month</span>
                                        <h3 class="text-sm font-semibold text-slate-700">Tổng tháng (<span
                                                id="displayDays">27</span> ngày)</h3>
                                    </div>
                                    <div
                                        class="text-2xl font-bold tracking-tight text-slate-900 mb-4 flex items-baseline gap-1">
                                        <span id="monthlyCong" class="text-green-600">-</span>
                                        <span class="text-base font-medium text-slate-400">công</span>
                                    </div>
                                </div>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between py-1 border-b border-green-100/50">
                                        <span class="text-slate-500">Tổng phút</span>
                                        <span class="font-mono font-medium text-slate-700" id="monthlyMins">-</span>
                                    </div>
                                    <div class="flex justify-between py-1 border-b border-green-100/50">
                                        <span class="text-slate-500">Tổng giờ</span>
                                        <span class="font-mono font-medium text-slate-700" id="monthlyHours">-</span>
                                    </div>
                                    <div class="flex justify-between py-1 pt-1">
                                        <span class="text-slate-500 font-medium">Làm tròn</span>
                                        <span class="font-mono font-bold text-slate-900"
                                            id="monthlyCongRounded">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Report Card -->
                        <div
                            class="bg-white rounded-xl border border-slate-200 shadow-sm p-0 overflow-hidden flex flex-col">
                            <div
                                class="p-3 bg-slate-50/80 border-b border-slate-100 flex items-center justify-between backdrop-blur-sm">
                                <h3
                                    class="font-semibold text-xs md:text-sm text-slate-700 flex items-center gap-2 uppercase tracking-wide ml-1">
                                    <span class="material-symbols-outlined text-slate-400">description</span>
                                    Chi tiết báo cáo
                                </h3>
                                <div class="flex gap-2">
                                    <button onclick="exportToWord()"
                                        class="group inline-flex items-center justify-center whitespace-nowrap rounded-lg text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 text-white hover:bg-blue-700 h-8 px-3 shadow-sm active:scale-95">
                                        <span
                                            class="material-symbols-outlined text-[16px] sm:mr-1.5 mr-0 group-hover:scale-110 transition-transform">file_download</span>
                                        <span class="hidden sm:inline">Xuất báo cáo</span>
                                    </button>
                                    <button onclick="copyReport()"
                                        class="group inline-flex items-center justify-center whitespace-nowrap rounded-lg text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-slate-900 text-white hover:bg-slate-800 h-8 px-3 shadow-sm active:scale-95">
                                        <span
                                            class="material-symbols-outlined text-[16px] sm:mr-1.5 mr-0 group-hover:scale-110 transition-transform">content_copy</span>
                                        <span class="hidden sm:inline">Sao chép</span>
                                    </button>
                                </div>
                            </div>
                            <div class="relative">
                                <textarea id="reportText" rows="8"
                                    class="w-full p-4 bg-white text-slate-600 font-mono text-xs md:text-sm resize-none focus:outline-none leading-relaxed max-h-[200px] sm:max-h-[300px] overflow-y-auto"
                                    readonly></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 3: SALARY -->
            <div id="tab-salary" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tài chính</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tính Lương Tháng</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-5 xl:gap-8 relative">
                    <!-- Left Column: Inputs -->
                    <div class="space-y-5 h-full">
                        <div
                            class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 flex flex-col h-full">
                            <h3 class="font-bold text-lg text-slate-800 mb-5">Thông tin lương</h3>

                            <div class="space-y-4 flex-1">
                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Lương thỏa thuận
                                            (Gross)</label>
                                    </div>
                                    <input type="text" id="salaryGross" value="15,000,000" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation text-right font-mono"
                                        oninput="formatCurrencyInput(this)">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Lương đóng bảo
                                            hiểm</label>
                                    </div>
                                    <input type="text" id="salaryInsurance" placeholder="Để trống nếu đóng full lương"
                                        inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation text-right font-mono"
                                        oninput="formatCurrencyInput(this)">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Số ngày công thực
                                            tế</label>
                                    </div>
                                    <input type="number" id="actualWorkDays" value="26" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Số ngày nghỉ
                                            hưởng lương</label>
                                    </div>
                                    <input type="number" id="paidLeaveDays" value="0" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Số người phụ
                                            thuộc</label>
                                    </div>
                                    <input type="number" id="dependents" value="0" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Phụ cấp & Thưởng
                                            khác</label>
                                    </div>
                                    <input type="text" id="allowance" value="0" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation text-right font-mono"
                                        oninput="formatCurrencyInput(this)">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Các khoản trừ
                                            khác</label>
                                    </div>
                                    <input type="text" id="otherDeductions" value="0" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation text-right font-mono"
                                        oninput="formatCurrencyInput(this)">
                                </div>
                            </div>

                            <div class="flex gap-3 pt-4 mt-auto">
                                <button onclick="resetSalaryForm()"
                                    class="flex-1 px-4 py-2 border border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors text-sm font-medium">Hủy</button>
                                <button onclick="calculateSalary()"
                                    class="flex-1 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors text-sm font-medium flex items-center justify-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">calculate</span> Tính toán
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Results -->
                    <div class="space-y-5 h-full">
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 h-full">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-lg text-slate-800">Bảng lương chi tiết</h3>
                                <button onclick="exportSalaryReport()"
                                    class="group inline-flex items-center justify-center whitespace-nowrap rounded-lg text-xs font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 text-white hover:bg-blue-700 h-8 px-3 shadow-sm active:scale-95">
                                    <span
                                        class="material-symbols-outlined text-[16px] sm:mr-1.5 mr-0 group-hover:scale-110 transition-transform">file_download</span>
                                    <span class="hidden sm:inline">Xuất phiếu lương</span>
                                </button>
                            </div>

                            <!-- Note Box -->
                            <div class="bg-blue-50 rounded-lg p-3 mb-4 border border-blue-100 text-[12px]">
                                <h4 class="text-blue-700 font-semibold text-base mb-1">Ghi chú về cách tính lương</h4>
                                <p class="text-[13px] text-red-500 mb-1 font-medium tracking-wide">Lưu ý: Cách tính
                                    lương này áp dụng cho Công ty Cổ phần Thương mại và Dược phẩm Ngọc Thiện</p>
                                <ul class="text-[13px] text-blue-600 space-y-0.5 list-disc pl-4">
                                    <li>Dưới 22 công: (Lương thỏa thuận / 22) × Số ngày công thực tế</li>
                                    <li>Từ 22 - 26 công: 100% Lương thỏa thuận</li>
                                    <li>Trên 26 công: (Lương thỏa thuận / 26) × Số ngày công thực tế</li>
                                    <li>Ngày nghỉ hưởng lương: (Lương đóng bảo hiểm / 26) × Số ngày nghỉ</li>
                                </ul>
                            </div>

                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between text-slate-600">
                                    <span>1. Lương theo ngày công thực tế</span>
                                    <div class="text-right">
                                        <span class="font-medium text-slate-900" id="outSalaryWork">0 ₫</span>
                                        <span class="text-[10px] text-slate-400 block" id="outWorkDays">(0 ngày)</span>
                                    </div>
                                </div>
                                <div class="flex justify-between text-slate-600">
                                    <span>2. Lương ngày nghỉ hưởng lương</span>
                                    <div class="text-right">
                                        <span class="font-medium text-slate-900" id="outSalaryLeave">0 ₫</span>
                                        <span class="text-[10px] text-slate-400 block" id="outLeaveDays">(0 ngày)</span>
                                    </div>
                                </div>
                                <div class="flex justify-between text-slate-600">
                                    <span>3. Phụ cấp & Thưởng khác</span>
                                    <span class="font-medium text-slate-900" id="outAllowance">+ 0 ₫</span>
                                </div>

                                <div class="pt-3 border-t border-slate-100 flex justify-between items-center">
                                    <span class="font-bold text-slate-800">A. Tổng thu nhập (Gross)</span>
                                    <span class="font-bold text-slate-900 text-sm" id="outGrossTotal">0 ₫</span>
                                </div>

                                <div class="pt-1">
                                    <span class="font-bold text-slate-800 block mb-1">B. Các khoản khấu trừ</span>
                                    <div class="pl-4 space-y-1 border-l-2 border-slate-100">
                                        <div class="flex justify-between text-slate-600">
                                            <span>1. Bảo hiểm xã hội (8%)</span>
                                            <span class="font-medium text-slate-900" id="outBHXH">- 0 ₫</span>
                                        </div>
                                        <div class="flex justify-between text-slate-600">
                                            <span>2. Bảo hiểm y tế (1.5%)</span>
                                            <span class="font-medium text-slate-900" id="outBHYT">- 0 ₫</span>
                                        </div>
                                        <div class="flex justify-between text-slate-600">
                                            <span>3. Bảo hiểm thất nghiệp (1%)</span>
                                            <span class="font-medium text-slate-900" id="outBHTN">- 0 ₫</span>
                                        </div>
                                        <div class="flex justify-between text-slate-600">
                                            <span>4. Các khoản trừ khác</span>
                                            <span class="font-medium text-slate-900" id="outOtherDeductions">- 0
                                                ₫</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex justify-between items-center pt-1 text-red-600 font-medium">
                                    <span>Tổng khấu trừ</span>
                                    <span id="outTotalDeductions">0 ₫</span>
                                </div>

                                <div class="my-3 border-t border-dashed border-slate-200"></div>

                                <div class="flex justify-between items-end">
                                    <span class="font-bold text-lg text-slate-800">Lương thực nhận (NET)</span>
                                    <span class="font-bold text-lg text-green-600" id="outNetSalary">0 ₫</span>
                                </div>

                                <div
                                    class="flex justify-between items-center pt-3 border-t border-slate-100 text-slate-500 text-[15px]">
                                    <span>Thuế TNCN (Ước tính)</span>
                                    <span class="font-medium text-slate-700" id="outPIT">0 ₫</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 4: TAX CALCULATOR -->
            <div id="tab-tax" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tài chính</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tính Thuế TNCN</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-5 xl:gap-8 relative">
                    <!-- Left Column: Inputs -->
                    <div class="space-y-5 h-full">
                        <div
                            class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 flex flex-col h-full">
                            <div class="flex justify-between items-center mb-5">
                                <h3 class="font-bold text-lg text-slate-800">Thông tin thu nhập</h3>
                                <button onclick="exportTaxReport()"
                                    class="flex items-center justify-center sm:gap-1.5 gap-0 px-3 py-1.5 bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium rounded-lg transition-colors shadow-sm">
                                    <span class="material-symbols-outlined text-[18px]">file_download</span>
                                    <span class="hidden sm:inline">Xuất thông tin thuế TNCN</span>
                                </button>
                            </div>

                            <div class="space-y-4 flex-1">
                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Thu nhập tháng
                                            (Gross)</label>
                                    </div>
                                    <input type="text" id="taxGross" value="20,000,000" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation text-right font-mono"
                                        oninput="formatCurrencyInput(this); calculateTax()">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Lương đóng bảo
                                            hiểm</label>
                                    </div>
                                    <input type="text" id="taxInsuranceSalary" placeholder="Mặc định bằng lương Gross"
                                        inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation text-right font-mono"
                                        oninput="formatCurrencyInput(this); calculateTax()">
                                </div>

                                <div>
                                    <div class="flex justify-between">
                                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Số người phụ
                                            thuộc</label>
                                    </div>
                                    <input type="number" id="taxDependents" value="0" min="0" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 save-target touch-manipulation"
                                        oninput="calculateTax()">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Vùng (Lương tối
                                        thiểu)</label>
                                    <input type="hidden" id="taxRegion" value="1" class="save-target"
                                        onchange="calculateTax()">

                                    <div class="relative">
                                        <button type="button" onclick="toggleRegionDropdown(event)"
                                            id="regionDropdownBtn"
                                            class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 text-left flex items-center justify-between cursor-pointer hover:border-blue-400">
                                            <span id="regionSelectedText" class="truncate text-sm">Vùng I
                                                (4.960.000đ)</span>
                                            <span
                                                class="material-symbols-outlined text-slate-400 text-[20px] transition-transform duration-200"
                                                id="regionDropdownArrow">expand_more</span>
                                        </button>

                                        <div id="regionDropdownMenu"
                                            class="hidden absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100 origin-top-left">
                                            <div class="p-1 space-y-0.5">
                                                <div onclick="selectRegion(1, 'Vùng I (4.960.000đ)')"
                                                    class="region-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="1">
                                                    <span>Vùng I (4.960.000đ)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                                <div onclick="selectRegion(2, 'Vùng II (4.410.000đ)')"
                                                    class="region-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="2">
                                                    <span>Vùng II (4.410.000đ)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                                <div onclick="selectRegion(3, 'Vùng III (3.860.000đ)')"
                                                    class="region-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="3">
                                                    <span>Vùng III (3.860.000đ)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                                <div onclick="selectRegion(4, 'Vùng IV (3.450.000đ)')"
                                                    class="region-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="4">
                                                    <span>Vùng IV (3.450.000đ)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-[10px] text-slate-400 mt-1">Dùng để tính trần BHTN (20 lần Lương tối
                                        thiểu vùng)</p>
                                </div>

                                <div class="pt-2">
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Cấu hình bảo
                                        hiểm</label>
                                    <div class="flex flex-wrap gap-3 sm:gap-4 mt-5">
                                        <div class="flex items-center gap-2">
                                            <input id="checkBHXH" type="checkbox" checked onchange="calculateTax()"
                                                class="custom-checkbox">
                                            <label for="checkBHXH"
                                                class="select-none text-sm font-medium text-slate-700 cursor-pointer whitespace-nowrap">BHXH
                                                (8%)</label>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input id="checkBHYT" type="checkbox" checked onchange="calculateTax()"
                                                class="custom-checkbox">
                                            <label for="checkBHYT"
                                                class="select-none text-sm font-medium text-slate-700 cursor-pointer whitespace-nowrap">BHYT
                                                (1.5%)</label>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input id="checkBHTN" type="checkbox" checked onchange="calculateTax()"
                                                class="custom-checkbox">
                                            <label for="checkBHTN"
                                                class="select-none text-sm font-medium text-slate-700 cursor-pointer whitespace-nowrap">BHTN
                                                (1%)</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100">
                                    <h4 class="text-xs font-bold text-blue-700 mb-2 uppercase tracking-wide">Giải thích
                                        thuật ngữ</h4>
                                    <div class="space-y-2 text-xs text-slate-600">
                                        <p><span class="font-semibold text-slate-800">Lương Gross:</span> Là tổng thu
                                            nhập bao gồm lương cơ bản và các khoản trợ cấp, phụ cấp, hoa hồng... chưa
                                            trừ các khoản đóng bảo hiểm và thuế TNCN.</p>
                                        <p><span class="font-semibold text-slate-800">Lương Net:</span> Là số tiền thực
                                            tế bạn nhận được sau khi đã trừ đi các khoản bảo hiểm (BHXH, BHYT, BHTN) và
                                            thuế thu nhập cá nhân.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Results -->
                    <div class="space-y-5 h-full">
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-0 overflow-hidden h-full">
                            <!-- Main Result Table -->
                            <div class="bg-slate-100/50 p-4 border-b border-slate-200">
                                <div class="space-y-0 text-sm">
                                    <div
                                        class="flex justify-between items-center py-2 px-2 bg-slate-200/50 rounded font-bold text-slate-800 mb-1">
                                        <span>Lương GROSS</span>
                                        <span id="resTaxGross">0</span>
                                    </div>

                                    <div class="flex justify-between items-center py-2 px-2 border-b border-slate-100">
                                        <span class="text-slate-600 font-medium">Bảo hiểm xã hội (8%)</span>
                                        <span class="text-slate-800" id="resTaxBHXH">0</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 px-2 border-b border-slate-100">
                                        <span class="text-slate-600 font-medium">Bảo hiểm y tế (1.5%)</span>
                                        <span class="text-slate-800" id="resTaxBHYT">0</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 px-2 border-b border-slate-100">
                                        <span class="text-slate-600 font-medium">Bảo hiểm thất nghiệp (1%)</span>
                                        <span class="text-slate-800" id="resTaxBHTN">0</span>
                                    </div>

                                    <div
                                        class="flex justify-between items-center py-2 px-2 bg-slate-200/50 rounded font-bold text-slate-800 my-1">
                                        <span>Thu nhập trước thuế</span>
                                        <span id="resTaxTNTT">0</span>
                                    </div>

                                    <div class="flex justify-between items-center py-2 px-2 border-b border-slate-100">
                                        <span class="text-slate-600 font-medium">Giảm trừ gia cảnh bản thân</span>
                                        <span class="text-slate-800" id="resTaxSelfDeduction">11,000,000</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 px-2 border-b border-slate-100">
                                        <span class="text-slate-600 font-medium">Giảm trừ gia cảnh người phụ
                                            thuộc</span>
                                        <span class="text-slate-800" id="resTaxDependentDeduction">0</span>
                                    </div>

                                    <div
                                        class="flex justify-between items-center py-2 px-2 bg-slate-200/50 rounded font-bold text-slate-800 my-1">
                                        <span>Thu nhập chịu thuế</span>
                                        <span id="resTaxTNCT">0</span>
                                    </div>

                                    <div
                                        class="flex justify-between items-center py-2 px-2 bg-white rounded border border-slate-200 font-bold text-slate-800">
                                        <span>Thuế thu nhập cá nhân(*)</span>
                                        <span id="resTaxValue">0</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Detailed Breakdown Table -->
                            <div class="p-4 bg-white">
                                <h4 class="text-green-600 font-bold text-sm mb-3">(*) Chi tiết thuế thu nhập cá nhân
                                    (VNĐ)</h4>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm text-left">
                                        <thead class="bg-slate-100 text-slate-700 font-semibold">
                                            <tr>
                                                <th class="py-2 px-3 text-right w-1/2">Mức chịu thuế</th>
                                                <th class="py-2 px-3 text-center w-1/4">Thuế suất</th>
                                                <th class="py-2 px-3 text-right w-1/4">Tiền nộp</th>
                                            </tr>
                                        </thead>
                                        <tbody id="taxDetailBody" class="divide-y divide-slate-100">
                                            <!-- Rows will be populated by JS -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Third Column: Announcements -->
                    <div class="space-y-5 h-full">
                        <div
                            class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 h-full custom-scrollbar">
                            <div class="flex items-center gap-2 mb-4 pb-3 border-b border-slate-100">
                                <span
                                    class="material-symbols-outlined text-red-500 bg-red-50 p-1.5 rounded-md">campaign</span>
                                <h3 class="font-bold text-lg text-slate-800">Thông báo mới nhất</h3>
                            </div>

                            <div class="space-y-6 text-sm text-slate-600">
                                <!-- Item 1 -->
                                <div>
                                    <div class="flex items-center gap-2 mb-2">
                                        <span
                                            class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full">MỚI</span>
                                        <h3 class="font-bold text-slate-800">1. Cập nhật mức lương cơ sở 2025</h3>
                                    </div>
                                    <p class="mb-2 text-justify text-sm leading-relaxed">Căn cứ theo <span
                                            class="text-green-600 font-semibold">Nghị định 73/2024/NĐ-CP</span>, kể từ
                                        ngày 1/7/2024, mức lương cơ sở áp dụng đối với cán bộ, công chức, viên chức và
                                        lực lượng vũ trang là <span
                                            class="font-bold text-slate-900 bg-yellow-100 px-1">2,340,000
                                            đồng/tháng</span>.</p>
                                    <p class="mb-1 text-sm font-medium text-slate-700">Mức lương cơ sở này dùng để:</p>
                                    <ul class="list-disc pl-4 space-y-1 text-[13px] text-slate-500">
                                        <li>Tính mức lương trong các bảng lương, mức phụ cấp và thực hiện các chế độ
                                            khác theo quy định của pháp luật đối với các đối tượng quy định tại Điều 2
                                            Nghị định này;</li>
                                        <li>Tính mức hoạt động phí, sinh hoạt phí theo quy định của pháp luật;</li>
                                        <li>Tính các khoản trích và chế độ được hưởng theo quy định của pháp luật.</li>
                                    </ul>
                                </div>

                                <div class="border-t border-slate-100 my-2"></div>

                                <!-- Item 2 -->
                                <div>
                                    <div class="flex items-center gap-2 mb-2">
                                        <span
                                            class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full">MỚI</span>
                                        <h3 class="font-bold text-slate-800">2. Lương tối thiểu vùng 2025</h3>
                                    </div>
                                    <p class="mb-2 text-justify text-sm leading-relaxed">Từ 01/07/2025, theo <span
                                            class="text-green-600 font-semibold">Nghị định 128/2025/NĐ-CP</span>, mức
                                        lương tối thiểu vùng giữ nguyên, nhưng thay đổi phạm vi áp dụng theo <span
                                            class="font-semibold">địa bàn cấp xã</span>.</p>

                                    <div class="bg-green-50 border border-green-100 p-2.5 rounded-lg mb-3">
                                        <p class="text-green-800 text-[13px] font-medium italic leading-tight">** Danh
                                            mục địa bàn cấp xã áp dụng quy định tại Phụ lục I – trang 18 của Nghị định
                                            128/2025/NĐ-CP</p>
                                    </div>

                                    <p class="mb-2 text-sm font-medium text-slate-700">Mức lương tối thiểu vùng (NĐ
                                        74/2024/NĐ-CP):</p>
                                    <ul class="space-y-1 mb-3 text-sm">
                                        <li class="flex justify-between"><span class="text-slate-500">Vùng I:</span>
                                            <span class="font-bold text-slate-800">4.960.000 đ</span></li>
                                        <li class="flex justify-between"><span class="text-slate-500">Vùng II:</span>
                                            <span class="font-bold text-slate-800">4.410.000 đ</span></li>
                                        <li class="flex justify-between"><span class="text-slate-500">Vùng III:</span>
                                            <span class="font-bold text-slate-800">3.860.000 đ</span></li>
                                        <li class="flex justify-between"><span class="text-slate-500">Vùng IV:</span>
                                            <span class="font-bold text-slate-800">3.450.000 đ</span></li>
                                    </ul>

                                    <div class="bg-slate-50 p-2.5 rounded-lg border border-slate-100">
                                        <p class="font-bold text-slate-800 text-[11px] mb-1 flex items-center gap-1">
                                            <span
                                                class="material-symbols-outlined text-[15px] text-amber-500">warning</span>
                                            Lưu ý quan trọng:</p>
                                        <p class="text-[13px] text-justify text-slate-500 leading-relaxed">Doanh nghiệp
                                            cần rà soát lại địa chỉ nơi làm việc theo danh sách mới. Nếu mức lương tối
                                            thiểu mới thấp hơn trước, vẫn tiếp tục áp dụng mức cũ.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- TAB 5: COMPOUND INTEREST -->
            <div id="tab-compound" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tài chính</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Lãi Suất Kép</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-5 xl:gap-8 relative">
                    <!-- Left Column: Inputs -->
                    <div class="space-y-5">
                        <div
                            class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 flex flex-col h-full">
                            <h3 class="font-bold text-lg text-slate-800 mb-5">Thông tin gửi tiết kiệm</h3>

                            <div class="space-y-4 flex-1">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Số tiền gốc ban
                                        đầu</label>
                                    <input type="text" id="compoundPrincipal" value="100,000,000" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 text-right font-mono"
                                        oninput="formatCurrencyInput(this); calculateCompoundInterest()">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Lãi suất hàng năm
                                        (%)</label>
                                    <input type="number" id="compoundRate" value="7.5" step="0.1" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 text-right font-mono"
                                        oninput="calculateCompoundInterest()">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Thời gian gửi
                                        (Năm)</label>
                                    <input type="number" id="compoundYears" value="10" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 text-right font-mono"
                                        oninput="calculateCompoundInterest()">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Tần suất ghép
                                        lãi</label>
                                    <input type="hidden" id="compoundFrequency" value="12"
                                        onchange="calculateCompoundInterest()">

                                    <div class="relative">
                                        <button type="button" onclick="toggleFrequencyDropdown(event)"
                                            id="frequencyDropdownBtn"
                                            class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-50 text-left flex items-center justify-between cursor-pointer hover:border-blue-400">
                                            <span id="frequencySelectedText" class="truncate text-sm">Hàng tháng (12
                                                lần/năm)</span>
                                            <span
                                                class="material-symbols-outlined text-slate-400 text-[20px] transition-transform duration-200"
                                                id="frequencyDropdownArrow">expand_more</span>
                                        </button>

                                        <div id="frequencyDropdownMenu"
                                            class="hidden absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100 origin-top-left">
                                            <div class="p-1 space-y-0.5">
                                                <div onclick="selectFrequency(12, 'Hàng tháng (12 lần/năm)')"
                                                    class="frequency-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="12">
                                                    <span>Hàng tháng (12 lần/năm)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                                <div onclick="selectFrequency(4, 'Hàng quý (4 lần/năm)')"
                                                    class="frequency-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="4">
                                                    <span>Hàng quý (4 lần/năm)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                                <div onclick="selectFrequency(1, 'Hàng năm (1 lần/năm)')"
                                                    class="frequency-option flex items-center justify-between px-3 py-2.5 text-sm text-slate-700 rounded-md hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors"
                                                    data-value="1">
                                                    <span>Hàng năm (1 lần/năm)</span>
                                                    <span
                                                        class="material-symbols-outlined text-[18px] text-blue-600 opacity-0 check-icon">check</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Số tiền gửi thêm hàng
                                        tháng</label>
                                    <input type="text" id="compoundContribution" value="0" inputmode="numeric"
                                        class="h-11 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base md:text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 text-right font-mono"
                                        oninput="formatCurrencyInput(this); calculateCompoundInterest()">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Middle Column: Results -->
                    <div class="space-y-5 h-full">
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 h-full">
                            <h3 class="font-bold text-lg text-slate-800 mb-4">Kết quả dự tính</h3>

                            <div class="space-y-4">
                                <div class="bg-blue-50 rounded-xl p-5 text-center border border-blue-100">
                                    <p class="text-sm text-blue-600 font-medium mb-1">Tổng số tiền nhận được</p>
                                    <p class="text-3xl font-bold text-blue-700 tracking-tight" id="resCompoundTotal">0 ₫
                                    </p>
                                </div>

                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-slate-50 rounded-lg p-4 border border-slate-100">
                                        <p class="text-xs text-slate-500 mb-1">Tổng tiền gốc đã nộp</p>
                                        <p class="text-lg font-bold text-slate-800" id="resCompoundPrincipal">0 ₫</p>
                                    </div>
                                    <div class="bg-green-50 rounded-lg p-4 border border-green-100">
                                        <p class="text-xs text-green-600 mb-1">Tổng tiền lãi</p>
                                        <p class="text-lg font-bold text-green-700" id="resCompoundInterest">0 ₫</p>
                                    </div>
                                </div>

                                <div class="pt-4 border-t border-slate-100">
                                    <p class="text-xs text-slate-400 italic text-center">
                                        * Tính toán mang tính chất tham khảo, chưa bao gồm lạm phát và biến động lãi
                                        suất.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Information -->
                    <div class="space-y-5 h-full">
                        <div
                            class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 h-full custom-scrollbar">
                            <div class="flex items-center gap-2 mb-4 pb-3 border-b border-slate-100">
                                <span
                                    class="material-symbols-outlined text-blue-500 bg-blue-50 p-1.5 rounded-md">info</span>
                                <h3 class="font-bold text-lg text-slate-800">Thông tin</h3>
                            </div>

                            <div class="space-y-4 text-sm text-slate-600">
                                <div>
                                    <h4 class="font-bold text-slate-800 mb-2">Công cụ tính lãi suất kép</h4>
                                    <p class="text-justify text-xs leading-relaxed mb-2">Lãi suất kép (Compound
                                        Interest) được Einstein nhận định là "kỳ quan thứ 8 của thế giới". Những ai hiểu
                                        được nó từ đó sẽ kiếm được tiền, ai không hiểu sẽ phải trả chi phí cho điều đó.
                                    </p>
                                    <p class="text-justify text-xs leading-relaxed">Công cụ này giúp bạn tính toán và dự
                                        báo sự tăng trưởng "khối tài sản" (tiền gửi tiết kiệm, đầu tư) trong tương lai.
                                    </p>
                                </div>

                                <div>
                                    <h4 class="font-bold text-slate-800 mb-2">Lãi suất kép là gì?</h4>
                                    <p class="text-justify text-xs leading-relaxed">Lãi suất kép (lãi kép) hay còn gọi
                                        là lãi cộng dồn, nghĩa là khi đến kỳ nhận lãi, bạn lấy lãi đó nhập vào gốc để
                                        tiếp tục đầu tư cho chu kỳ tiếp theo. Cứ lặp đi lặp lại như vậy xuyên suốt thời
                                        gian đầu tư.</p>
                                </div>

                                <div>
                                    <h4 class="font-bold text-slate-800 mb-2">Công thức tính lãi suất kép</h4>
                                    <div
                                        class="bg-slate-50 p-3 rounded-lg border border-slate-100 mb-3 flex justify-center">
                                        <div class="text-xl font-serif italic font-bold text-slate-800">
                                            F<sub class="text-xs">n</sub> = P × (1 + <span
                                                class="inline-flex flex-col items-center align-middle mx-1"><span
                                                    class="border-b border-slate-800 leading-none pb-0.5">i</span><span
                                                    class="leading-none pt-0.5">m</span></span>)<sup class="text-xs">n ×
                                                m</sup>
                                        </div>
                                    </div>
                                    <p class="text-xs font-medium text-slate-700 mb-1">Trong đó:</p>
                                    <ul class="list-disc pl-4 space-y-1 text-[11px] text-slate-500">
                                        <li><span class="font-bold text-slate-700">Fn</span>: Giá trị tương lai (số tiền
                                            nhận được).</li>
                                        <li><span class="font-bold text-slate-700">P</span>: Số tiền gốc ban đầu.</li>
                                        <li><span class="font-bold text-slate-700">i</span>: Lãi suất hàng năm (dạng
                                            thập phân, vd 10% = 0.1).</li>
                                        <li><span class="font-bold text-slate-700">n</span>: Số năm gửi.</li>
                                        <li><span class="font-bold text-slate-700">m</span>: Số lần ghép lãi trong 1
                                            năm.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 5: SORTING VISUALIZER -->
            <div id="tab-sorting" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tiện ích</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Biểu Diễn Thuật
                                    Toán</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Controls -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                    <div class="flex flex-col xl:flex-row gap-4 items-end justify-between">
                        <div class="flex flex-wrap gap-4 items-end justify-center xl:justify-start w-full xl:w-auto">

                            <!-- Custom Algorithm Dropdown -->
                            <div class="relative w-full sm:w-48 z-20">
                                <label class="block text-sm font-medium text-slate-700 mb-1.5">Thuật toán</label>
                                <button id="algoDropdownBtn" onclick="toggleAlgoDropdown(event)"
                                    class="w-full h-11 bg-white border border-slate-200 rounded-lg px-3 flex items-center justify-between text-sm text-slate-700 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all">
                                    <span id="algoSelectedText" class="font-medium">Bubble Sort</span>
                                    <span id="algoDropdownArrow"
                                        class="material-symbols-outlined text-slate-400 transition-transform duration-200 text-[20px]">expand_more</span>
                                </button>

                                <!-- Dropdown Menu -->
                                <div id="algoDropdownMenu"
                                    class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-50 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100 max-h-64 overflow-y-auto">
                                    <div onclick="selectAlgo('bubble', 'Bubble Sort')"
                                        class="algo-option px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                        data-value="bubble">
                                        <span
                                            class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">Bubble
                                            Sort</span>
                                        <span
                                            class="material-symbols-outlined text-blue-600 text-[18px] opacity-100 check-icon">check</span>
                                    </div>
                                    <div onclick="selectAlgo('quick', 'Quick Sort')"
                                        class="algo-option px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                        data-value="quick">
                                        <span class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">Quick
                                            Sort</span>
                                        <span
                                            class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                    </div>
                                    <div onclick="selectAlgo('selection', 'Selection Sort')"
                                        class="algo-option px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                        data-value="selection">
                                        <span
                                            class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">Selection
                                            Sort</span>
                                        <span
                                            class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                    </div>
                                    <div onclick="selectAlgo('insertion', 'Insertion Sort')"
                                        class="algo-option px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                        data-value="insertion">
                                        <span
                                            class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">Insertion
                                            Sort</span>
                                        <span
                                            class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                    </div>
                                    <div onclick="selectAlgo('merge', 'Merge Sort')"
                                        class="algo-option px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                        data-value="merge">
                                        <span class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">Merge
                                            Sort</span>
                                        <span
                                            class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                    </div>
                                </div>
                                <input type="hidden" id="sortAlgorithm" value="bubble">
                            </div>

                            <!-- Sliders -->
                            <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                                <div class="flex flex-col gap-1.5 w-full sm:w-auto">
                                    <div class="flex justify-between items-center">
                                        <label
                                            class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Kích
                                            thước</label>
                                        <span id="sizeValue"
                                            class="text-xs font-medium text-blue-600 bg-blue-50 px-2 py-0.5 rounded">50</span>
                                    </div>
                                    <input type="range" id="arraySize" min="10" max="100" value="50"
                                        class="custom-range w-full sm:w-48 xl:w-64"
                                        oninput="document.getElementById('sizeValue').innerText = this.value; generateNewArray()">
                                </div>

                                <div class="flex flex-col gap-1.5 w-full sm:w-auto">
                                    <div class="flex justify-between items-center">
                                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Tốc
                                            độ</label>
                                        <span id="speedValue"
                                            class="text-xs font-medium text-blue-600 bg-blue-50 px-2 py-0.5 rounded">50</span>
                                    </div>
                                    <input type="range" id="sortSpeed" min="1" max="100" value="50"
                                        class="custom-range w-full sm:w-48 xl:w-64"
                                        oninput="document.getElementById('speedValue').innerText = this.value">
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-3 w-full xl:w-auto">
                            <button onclick="resetSorting()" id="resetArrayBtn"
                                class="flex-1 xl:flex-none px-4 py-2.5 bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 text-sm font-semibold rounded-lg transition-colors active:scale-95 flex items-center justify-center gap-2 h-11 shadow-sm">
                                <span class="material-symbols-outlined text-[20px]">restart_alt</span>
                                Đặt lại
                            </button>
                            <button onclick="startSorting()" id="startSortBtn"
                                class="flex-1 xl:flex-none px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-lg shadow-lg shadow-blue-200 transition-all active:scale-95 flex items-center justify-center gap-2 h-11 min-w-[120px]">
                                <span class="material-symbols-outlined text-[20px]">play_arrow</span>
                                Bắt đầu
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Visualization Area -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5 h-[500px] flex items-end justify-center gap-[1px] sm:gap-[2px] overflow-hidden relative"
                    id="sortingContainer">
                    <!-- Bars will be generated here -->
                </div>

                <!-- Legend -->
                <div class="flex flex-wrap justify-center gap-6 text-sm text-slate-600">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                        <span>Chưa sắp xếp</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-yellow-400 rounded-full"></div>
                        <span>Đang so sánh</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-red-500 rounded-full"></div>
                        <span>Đang hoán đổi</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                        <span>Đã sắp xếp</span>
                    </div>
                </div>

                <!-- Algorithm Explanations -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                    <div class="p-4 md:p-5 border-b border-slate-100">
                        <h3 class="text-lg font-semibold text-slate-800 flex items-center gap-2">
                            <span class="material-symbols-outlined text-blue-600">table_chart</span>
                            So sánh thuật toán
                        </h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-600">
                            <thead class="text-xs text-slate-700 uppercase bg-slate-50 border-b border-slate-100">
                                <tr>
                                    <th scope="col" class="px-6 py-3 font-bold whitespace-nowrap">Thuật toán</th>
                                    <th scope="col" class="px-6 py-3 font-bold whitespace-nowrap">Thời gian (TB)</th>
                                    <th scope="col" class="px-6 py-3 font-bold whitespace-nowrap">Tốt nhất</th>
                                    <th scope="col" class="px-6 py-3 font-bold whitespace-nowrap">Tệ nhất</th>
                                    <th scope="col" class="px-6 py-3 font-bold whitespace-nowrap">Bộ nhớ</th>
                                    <th scope="col" class="px-6 py-3 font-bold whitespace-nowrap">Ổn định</th>
                                    <th scope="col" class="px-6 py-3 font-bold min-w-[300px]">Ý tưởng chính</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr class="bg-white hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">Bubble Sort</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-green-600">O(n)</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-green-600">O(1)</td>
                                    <td class="px-6 py-4 text-green-600 font-medium">Có</td>
                                    <td class="px-6 py-4">Hoán đổi các phần tử liền kề nếu chúng sai thứ tự. Lặp lại cho
                                        đến khi mảng được sắp xếp.</td>
                                </tr>
                                <tr class="bg-white hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">Selection Sort
                                    </td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-green-600">O(1)</td>
                                    <td class="px-6 py-4 text-red-500 font-medium">Không</td>
                                    <td class="px-6 py-4">Tìm phần tử nhỏ nhất trong phần chưa sắp xếp và đưa nó về đầu.
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">Insertion Sort
                                    </td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-green-600">O(n)</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-green-600">O(1)</td>
                                    <td class="px-6 py-4 text-green-600 font-medium">Có</td>
                                    <td class="px-6 py-4">Lấy từng phần tử và chèn nó vào đúng vị trí trong phần đã sắp
                                        xếp trước đó.</td>
                                </tr>
                                <tr class="bg-white hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">Quick Sort</td>
                                    <td class="px-6 py-4 font-mono text-blue-600">O(n log n)</td>
                                    <td class="px-6 py-4 font-mono text-blue-600">O(n log n)</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n²)</td>
                                    <td class="px-6 py-4 font-mono text-yellow-600">O(log n)</td>
                                    <td class="px-6 py-4 text-red-500 font-medium">Không</td>
                                    <td class="px-6 py-4">Chọn một điểm chốt (pivot), phân chia mảng thành hai phần (nhỏ
                                        hơn và lớn hơn chốt), rồi đệ quy.</td>
                                </tr>
                                <tr class="bg-white hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">Merge Sort</td>
                                    <td class="px-6 py-4 font-mono text-blue-600">O(n log n)</td>
                                    <td class="px-6 py-4 font-mono text-blue-600">O(n log n)</td>
                                    <td class="px-6 py-4 font-mono text-blue-600">O(n log n)</td>
                                    <td class="px-6 py-4 font-mono text-red-600">O(n)</td>
                                    <td class="px-6 py-4 text-green-600 font-medium">Có</td>
                                    <td class="px-6 py-4">Chia đôi mảng liên tục cho đến khi còn 1 phần tử, sau đó trộn
                                        (merge) lại theo thứ tự.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- TAB 6: TYPING SPEED TEST -->
            <div id="tab-typing" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tiện ích</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Kiểm Tra Tốc Độ Gõ</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Stats & Controls -->
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-5">
                    <!-- Stats Cards -->
                    <div class="lg:col-span-3 grid grid-cols-2 sm:grid-cols-4 gap-4">
                        <div
                            class="bg-white rounded-xl border border-slate-200 p-4 flex flex-col items-center justify-center shadow-sm">
                            <span class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">WPM</span>
                            <span id="wpmDisplay" class="text-3xl font-bold text-blue-600">0</span>
                        </div>
                        <div
                            class="bg-white rounded-xl border border-slate-200 p-4 flex flex-col items-center justify-center shadow-sm">
                            <span class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Độ chính
                                xác</span>
                            <span id="accuracyDisplay" class="text-3xl font-bold text-green-600">100%</span>
                        </div>
                        <div
                            class="bg-white rounded-xl border border-slate-200 p-4 flex flex-col items-center justify-center shadow-sm">
                            <span class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Thời
                                gian</span>
                            <span id="timeDisplay" class="text-3xl font-bold text-slate-700">60s</span>
                        </div>
                        <div
                            class="bg-white rounded-xl border border-slate-200 p-4 flex flex-col items-center justify-center shadow-sm">
                            <span class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Ký
                                tự</span>
                            <span id="charCountDisplay" class="text-3xl font-bold text-slate-700">0</span>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div
                        class="bg-white rounded-xl border border-slate-200 p-4 flex flex-col justify-center gap-3 shadow-sm z-20">

                        <!-- Language Dropdown -->
                        <div class="relative w-full">
                            <label
                                class="block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5">Ngôn
                                ngữ</label>
                            <button id="langDropdownBtn" onclick="toggleTypingDropdown('lang')"
                                class="w-full h-11 bg-white border border-slate-200 rounded-lg px-3 flex items-center justify-between text-sm text-slate-700 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all">
                                <span id="langSelectedText" class="font-medium">Tiếng Việt</span>
                                <span id="langDropdownArrow"
                                    class="material-symbols-outlined text-slate-400 transition-transform duration-200 text-[20px]">expand_more</span>
                            </button>

                            <div id="langDropdownMenu"
                                class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-50 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100">
                                <div onclick="selectTypingOption('lang', 'vi', 'Tiếng Việt')"
                                    class="typing-option-lang px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                    data-value="vi">
                                    <span class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">Tiếng
                                        Việt</span>
                                    <span
                                        class="material-symbols-outlined text-blue-600 text-[18px] opacity-100 check-icon">check</span>
                                </div>
                                <div onclick="selectTypingOption('lang', 'en', 'English')"
                                    class="typing-option-lang px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                    data-value="en">
                                    <span
                                        class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">English</span>
                                    <span
                                        class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                </div>
                            </div>
                            <input type="hidden" id="typingLang" value="vi">
                        </div>

                        <!-- Time Dropdown -->
                        <div class="relative w-full">
                            <label
                                class="block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5">Thời
                                gian</label>
                            <button id="timeDropdownBtn" onclick="toggleTypingDropdown('time')"
                                class="w-full h-11 bg-white border border-slate-200 rounded-lg px-3 flex items-center justify-between text-sm text-slate-700 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all">
                                <span id="timeSelectedText" class="font-medium">60 giây</span>
                                <span id="timeDropdownArrow"
                                    class="material-symbols-outlined text-slate-400 transition-transform duration-200 text-[20px]">expand_more</span>
                            </button>

                            <div id="timeDropdownMenu"
                                class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-50 py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100">
                                <div onclick="selectTypingOption('time', '15', '15 giây')"
                                    class="typing-option-time px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                    data-value="15">
                                    <span class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">15
                                        giây</span>
                                    <span
                                        class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                </div>
                                <div onclick="selectTypingOption('time', '30', '30 giây')"
                                    class="typing-option-time px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                    data-value="30">
                                    <span class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">30
                                        giây</span>
                                    <span
                                        class="material-symbols-outlined text-blue-600 text-[18px] opacity-0 check-icon">check</span>
                                </div>
                                <div onclick="selectTypingOption('time', '60', '60 giây')"
                                    class="typing-option-time px-3 py-2.5 hover:bg-blue-50 cursor-pointer flex items-center justify-between group transition-colors"
                                    data-value="60">
                                    <span class="text-sm text-slate-700 group-hover:text-blue-700 font-medium">60
                                        giây</span>
                                    <span
                                        class="material-symbols-outlined text-blue-600 text-[18px] opacity-100 check-icon">check</span>
                                </div>
                            </div>
                            <input type="hidden" id="timeLimitSelect" value="60">
                        </div>

                        <button onclick="resetTypingTest()"
                            class="w-full h-11 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-lg shadow-lg shadow-blue-200 transition-all active:scale-95 flex items-center justify-center gap-2 mt-auto">
                            <span class="material-symbols-outlined text-[20px]">refresh</span>
                            Làm mới
                        </button>
                    </div>
                </div>

                <!-- Typing Area -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 sm:p-8 relative"
                    onclick="document.getElementById('typingInput').focus()">
                    <div id="typingTextDisplay"
                        class="text-xl sm:text-2xl font-mono leading-relaxed text-slate-400 select-none min-h-[120px] break-words">
                        <!-- Text will be injected here -->
                        Nhấn vào đây để bắt đầu...
                    </div>
                    <input type="text" id="typingInput"
                        class="absolute opacity-0 top-0 left-0 h-full w-full cursor-default" autocomplete="off"
                        spellcheck="false">

                    <!-- Focus Overlay -->
                    <div id="focusOverlay"
                        class="absolute inset-0 bg-white/80 backdrop-blur-[1px] flex items-center justify-center z-10 rounded-xl cursor-pointer transition-opacity duration-200">
                        <div class="flex items-center gap-2 text-slate-500 font-medium animate-pulse">
                            <span class="material-symbols-outlined">touch_app</span>
                            Nhấn vào đây hoặc gõ phím bất kỳ để bắt đầu
                        </div>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-blue-600">monitoring</span>
                        Biểu đồ tiến bộ
                    </h3>
                    <div class="h-[300px] w-full">
                        <canvas id="typingChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- TAB 7: COUNTRIES INFO -->
            <div id="tab-countries" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Khám phá</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Quốc Gia</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Statistics Cards -->
                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3">
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-blue-600 text-[20px]">public</span>
                            <span class="text-xs text-slate-500 font-medium">Tổng số</span>
                        </div>
                        <div class="text-2xl font-bold text-slate-900" id="totalCountries">0</div>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-orange-600 text-[20px]">flag</span>
                            <span class="text-xs text-slate-500 font-medium">Châu Phi</span>
                        </div>
                        <div class="text-2xl font-bold text-slate-900" id="africaCount">0</div>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-green-600 text-[20px]">flag</span>
                            <span class="text-xs text-slate-500 font-medium">Châu Mỹ</span>
                        </div>
                        <div class="text-2xl font-bold text-slate-900" id="americasCount">0</div>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-red-600 text-[20px]">flag</span>
                            <span class="text-xs text-slate-500 font-medium">Châu Á</span>
                        </div>
                        <div class="text-2xl font-bold text-slate-900" id="asiaCount">0</div>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-purple-600 text-[20px]">flag</span>
                            <span class="text-xs text-slate-500 font-medium">Châu Âu</span>
                        </div>
                        <div class="text-2xl font-bold text-slate-900" id="europeCount">0</div>
                    </div>
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-cyan-600 text-[20px]">flag</span>
                            <span class="text-xs text-slate-500 font-medium">Châu Đại Dương</span>
                        </div>
                        <div class="text-2xl font-bold text-slate-900" id="oceaniaCount">0</div>
                    </div>
                </div>

                <!-- Search and Filter Bar -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <!-- Search Bar -->
                        <div class="flex-1">
                            <div class="relative">
                                <span
                                    class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]">search</span>
                                <input type="text" id="countrySearch" placeholder="Tìm kiếm quốc gia..."
                                    class="w-full h-11 pl-10 pr-4 rounded-lg border border-slate-200 bg-white text-sm leading-5 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600"
                                    oninput="filterCountries()">
                            </div>
                        </div>

                        <!-- Filter & View Controls -->
                        <div class="flex gap-2">
                            <div class="flex-1 sm:flex-initial sm:w-48 relative">
                                <button id="continentFilterBtn" onclick="toggleContinentDropdown()"
                                    class="w-full h-11 px-3 rounded-lg border border-slate-200 bg-white text-sm leading-5 transition-all hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 text-left flex items-center justify-between gap-2">
                                    <span id="continentFilterText" class="text-slate-700 truncate">Tất cả châu
                                        lục</span>
                                    <span id="continentDropdownArrow"
                                        class="material-symbols-outlined text-slate-400 text-[20px] transition-transform duration-200">expand_more</span>
                                </button>
                                <div id="continentDropdownMenu"
                                    class="hidden absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg overflow-hidden">
                                    <div class="py-1">
                                        <button onclick="selectContinent('', 'Tất cả châu lục')"
                                            class="w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors text-slate-700">Tất
                                            cả châu lục</button>
                                        <button onclick="selectContinent('Africa', 'Châu Phi')"
                                            class="w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors text-slate-700">Châu
                                            Phi</button>
                                        <button onclick="selectContinent('Americas', 'Châu Mỹ')"
                                            class="w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors text-slate-700">Châu
                                            Mỹ</button>
                                        <button onclick="selectContinent('Asia', 'Châu Á')"
                                            class="w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors text-slate-700">Châu
                                            Á</button>
                                        <button onclick="selectContinent('Europe', 'Châu Âu')"
                                            class="w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors text-slate-700">Châu
                                            Âu</button>
                                        <button onclick="selectContinent('Oceania', 'Châu Đại Dương')"
                                            class="w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors text-slate-700">Châu
                                            Đại Dương</button>
                                    </div>
                                </div>
                            </div>
                            <button onclick="setCountryView('cards')" id="viewCardsBtn"
                                class="px-3 h-11 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors flex items-center justify-center shrink-0">
                                <span class="material-symbols-outlined text-slate-600">grid_view</span>
                            </button>
                            <button onclick="setCountryView('list')" id="viewListBtn"
                                class="px-3 h-11 rounded-lg border border-slate-200 bg-slate-50 hover:bg-slate-100 transition-colors flex items-center justify-center shrink-0">
                                <span class="material-symbols-outlined text-blue-600">view_list</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Countries Grid (Card View) -->
                <div id="countriesGrid" class="hidden grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
                    <!-- Countries will be loaded here -->
                </div>

                <!-- Countries List (Accordion View) -->
                <div id="countriesList" class="space-y-2">
                    <!-- Countries will be loaded here -->
                </div>

                <!-- Pagination -->
                <div id="paginationControls"
                    class="flex flex-col sm:flex-row items-center justify-between gap-3 bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                    <div
                        class="flex flex-row items-center justify-between sm:justify-start gap-2 sm:gap-3 w-full sm:w-auto">
                        <div class="text-xs sm:text-sm text-slate-600">
                            Hiển thị <span id="pageInfo" class="font-semibold">1-5</span> / <span
                                id="totalCountriesInfo" class="font-semibold">0</span> quốc gia
                        </div>
                        <div class="flex items-center gap-2 relative">
                            <label class="text-xs sm:text-sm text-slate-500">Số dòng:</label>
                            <input type="hidden" id="itemsPerPageValue" value="5">
                            <button type="button" onclick="toggleItemsPerPageDropdown(event)" id="itemsPerPageBtn"
                                class="h-9 min-w-[70px] px-3 rounded-lg border border-slate-200 bg-white text-slate-700 text-sm transition-all hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 flex items-center justify-between gap-2 cursor-pointer">
                                <span id="itemsPerPageText">5</span>
                                <span
                                    class="material-symbols-outlined text-[18px] text-slate-400 transition-transform duration-200"
                                    id="itemsPerPageArrow">expand_more</span>
                            </button>
                            <div id="itemsPerPageMenu"
                                class="hidden absolute top-full right-0 mt-1 w-full min-w-[120px] bg-white border border-slate-200 rounded-lg shadow-lg z-50 overflow-hidden">
                                <div class="max-h-48 overflow-y-auto py-1">
                                    <div onclick="selectItemsPerPage(5)"
                                        class="items-per-page-option px-3 py-2 text-sm text-slate-700 hover:bg-blue-50 cursor-pointer flex items-center justify-between transition-colors"
                                        data-value="5">
                                        <span>5</span>
                                        <span
                                            class="material-symbols-outlined text-[18px] text-blue-600 check-icon">check</span>
                                    </div>
                                    <div onclick="selectItemsPerPage(10)"
                                        class="items-per-page-option px-3 py-2 text-sm text-slate-700 hover:bg-blue-50 cursor-pointer flex items-center justify-between transition-colors"
                                        data-value="10">
                                        <span>10</span>
                                        <span
                                            class="material-symbols-outlined text-[18px] text-blue-600 check-icon hidden">check</span>
                                    </div>
                                    <div onclick="selectItemsPerPage(20)"
                                        class="items-per-page-option px-3 py-2 text-sm text-slate-700 hover:bg-blue-50 cursor-pointer flex items-center justify-between transition-colors"
                                        data-value="20">
                                        <span>20</span>
                                        <span
                                            class="material-symbols-outlined text-[18px] text-blue-600 check-icon hidden">check</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-1 sm:gap-2 w-full sm:w-auto justify-center items-center overflow-x-auto">
                        <button onclick="changePage('prev')" id="prevPageBtn"
                            class="h-9 sm:h-10 px-2 sm:px-3 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 active:bg-slate-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-0.5 sm:gap-1 touch-manipulation flex-shrink-0">
                            <span class="material-symbols-outlined text-[18px]">chevron_left</span>
                            <span class="text-xs sm:text-sm hidden sm:inline">Trước</span>
                        </button>
                        <div id="pageNumbers" class="flex gap-1 sm:gap-1.5 flex-shrink-0">
                            <!-- Page numbers will be loaded here -->
                        </div>
                        <button onclick="changePage('next')" id="nextPageBtn"
                            class="h-9 sm:h-10 px-2 sm:px-3 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 active:bg-slate-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-0.5 sm:gap-1 touch-manipulation flex-shrink-0">
                            <span class="text-xs sm:text-sm hidden sm:inline">Sau</span>
                            <span class="material-symbols-outlined text-[18px]">chevron_right</span>
                        </button>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="countriesLoading" class="text-center py-12">
                    <div
                        class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-blue-600">
                    </div>
                    <p class="mt-4 text-slate-500">Đang tải dữ liệu quốc gia...</p>
                </div>
            </div>

            <!-- PHYSICS SIMULATION TAB -->
            <div id="tab-physics" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Khám phá</span>
                            </div>
                        </li>
                        <!-- Đã loại bỏ breadcrumb Vật Lý -->
                    </ol>
                </nav>
                <!-- Đã loại bỏ selector mô phỏng vật lý -->

                <!-- Controls -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 md:p-5">
                    <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
                        <!-- Speed Control -->
                        <div class="flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-lg flex-1 sm:flex-initial z-20 order-1 sm:order-1"
                            id="physicsSpeedControl">
                            <span class="material-symbols-outlined text-slate-600 text-[20px]">speed</span>
                            <span class="text-sm font-medium text-slate-700 whitespace-nowrap inline-block w-[65px]">Tốc
                                độ:</span>
                            <div class="relative flex-1 sm:flex-initial">
                                <button onclick="togglePhysicsSpeedDropdown(event)" id="physicsSpeedBtn"
                                    class="h-9 flex items-center justify-between w-full sm:w-[100px] px-3 bg-white text-slate-700 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/20 shadow-sm">
                                    <span id="physicsSpeedLabel" class="text-sm font-medium">1.0x</span>
                                    <span id="physicsSpeedArrow"
                                        class="material-symbols-outlined text-[18px] text-slate-400 transition-transform duration-200">expand_more</span>
                                </button>

                                <!-- Dropdown Menu -->
                                <div id="physicsSpeedMenu"
                                    class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-50 overflow-hidden">
                                    <div class="max-h-60 overflow-y-auto py-1 custom-scrollbar">
                                        <div onclick="setPhysicsSpeed(0.1)"
                                            class="physics-speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="0.1">
                                            <span>0.1x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setPhysicsSpeed(0.5)"
                                            class="physics-speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="0.5">
                                            <span>0.5x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setPhysicsSpeed(1.0)"
                                            class="physics-speed-option px-3 py-2 text-sm text-blue-600 bg-blue-50 font-medium cursor-pointer transition-colors flex items-center justify-between border-b border-slate-100 last:border-b-0"
                                            data-value="1.0">
                                            <span>1.0x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] text-blue-600">check</span>
                                        </div>
                                        <div onclick="setPhysicsSpeed(1.5)"
                                            class="physics-speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.5">
                                            <span>1.5x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setPhysicsSpeed(2.0)"
                                            class="physics-speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="2.0">
                                            <span>2.0x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setPhysicsSpeed(3.0)"
                                            class="physics-speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="3.0">
                                            <span>3.0x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ball Count Control -->
                        <div id="ballCountControl"
                            class="flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-lg flex-1 sm:flex-initial order-2 sm:order-2 overflow-hidden">
                            <span class="material-symbols-outlined text-slate-600 text-[20px]">sports_basketball</span>
                            <label
                                class="text-sm font-medium text-slate-700 whitespace-nowrap sm:block inline-block w-[65px]">Số
                                bóng:</label>

                            <div class="flex items-center justify-end flex-1 sm:flex-none min-w-0">
                                <div
                                    class="flex items-center bg-white rounded-lg border border-slate-200 shadow-sm h-9 w-full sm:w-[100px]">
                                    <button onclick="adjustBallCount(-1)"
                                        class="w-10 sm:w-8 h-full flex items-center justify-center text-slate-500 hover:text-blue-600 hover:bg-slate-50 rounded-l-lg transition-colors border-r border-slate-100 shrink-0">
                                        <span class="material-symbols-outlined text-[16px]">remove</span>
                                    </button>
                                    <input type="number" id="ballCount" min="1" max="50" value="10"
                                        onchange="updateBallCount()"
                                        class="flex-1 w-0 h-full text-center text-sm text-slate-700 focus:outline-none border-none p-0 appearance-none bg-transparent">
                                    <button onclick="adjustBallCount(1)"
                                        class="w-10 sm:w-8 h-full flex items-center justify-center text-slate-500 hover:text-blue-600 hover:bg-slate-50 rounded-r-lg transition-colors border-l border-slate-100 shrink-0">
                                        <span class="material-symbols-outlined text-[16px]">add</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Spacer for desktop -->
                        <div class="hidden sm:block sm:flex-1 order-3"></div>

                        <!-- Action Buttons -->
                        <div class="flex gap-2 order-4 sm:order-4">
                            <!-- Play/Pause Button -->
                            <button onclick="togglePhysicsSimulation()" id="physicsPlayBtn"
                                class="h-11 px-5 rounded-lg bg-blue-600 text-white font-medium text-sm hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 shadow-md flex-1 sm:flex-initial">
                                <span class="material-symbols-outlined text-[20px]"
                                    id="physicsPlayIcon">play_arrow</span>
                                <span id="physicsPlayText">Bắt đầu</span>
                            </button>

                            <!-- Reset Button -->
                            <button onclick="resetPhysicsSimulation()"
                                class="h-11 px-4 rounded-lg bg-slate-100 text-slate-700 font-medium text-sm hover:bg-slate-200 transition-colors flex items-center justify-center gap-2 flex-1 sm:flex-initial">
                                <span class="material-symbols-outlined text-[20px]">refresh</span>
                                <span>Đặt lại</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Canvas Container -->
                <div class="bg-slate-900 rounded-xl border border-slate-700 shadow-lg overflow-hidden">
                    <canvas id="physicsCanvas" class="w-full" style="height: 500px;"></canvas>
                </div>

                <!-- Info Panel -->
                <div id="physicsInfo" class="bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-purple-600" id="physicsObjectCount">0</div>
                            <div class="text-xs text-slate-500">Đối tượng</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-blue-600" id="physicsFPS">0</div>
                            <div class="text-xs text-slate-500">FPS</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-600" id="physicsCollisions">0</div>
                            <div class="text-xs text-slate-500">Va chạm</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-amber-600" id="physicsEnergy">0</div>
                            <div class="text-xs text-slate-500">Năng lượng</div>
                        </div>
                    </div>
                </div>

                <!-- Solar System Legend (hidden by default) -->
                <div id="solarLegend" class="hidden bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <h4 class="font-semibold text-slate-800 mb-3">Chú thích Hệ Mặt Trời</h4>
                    <div class="grid grid-cols-2 sm:grid-cols-5 gap-3 text-sm" id="solarLegendContent">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- SOLAR SYSTEM EXPLORER TAB -->
            <div id="tab-solar" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Khám phá</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Hệ Mặt Trời</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Controls -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <div class="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
                        <!-- View Toggle -->
                        <div class="flex bg-slate-100 p-1 rounded-lg w-full sm:w-auto shrink-0">
                            <button onclick="setSolarView('list')" id="btnSolarList"
                                class="flex-1 sm:flex-none justify-center px-4 py-2 rounded-lg text-sm font-medium transition-all bg-white text-blue-600 shadow-sm flex items-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">grid_view</span>
                                <span>Danh sách</span>
                            </button>
                            <button onclick="setSolarView('3d')" id="btnSolar3D"
                                class="flex-1 sm:flex-none justify-center px-4 py-2 rounded-lg text-sm font-medium transition-all text-slate-500 hover:text-slate-700 flex items-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">view_in_ar</span>
                                <span>Mô hình 3D</span>
                            </button>
                        </div>

                        <!-- Search -->
                        <div class="relative flex-1" id="solarSearchContainer">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="material-symbols-outlined text-slate-400 text-[18px]">search</span>
                            </div>
                            <input type="text" id="solarSearch"
                                class="block w-full h-11 pl-10 pr-3 border border-slate-200 rounded-lg bg-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 text-sm transition"
                                placeholder="Tìm kiếm hành tinh..." oninput="filterPlanets()">
                        </div>

                        <!-- 3D Speed Control (Dropdown) -->
                        <div class="hidden flex items-center gap-2 w-full sm:w-auto" id="solarSpeedControl">
                            <span class="text-sm text-slate-600 whitespace-nowrap">Tốc độ:</span>
                            <div class="relative flex-1 sm:flex-initial">
                                <button onclick="toggleSolarSpeedDropdown(event)" id="solarSpeedBtn"
                                    class="h-11 flex items-center justify-between w-full sm:w-[100px] px-3 bg-white text-slate-700 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/20 shadow-sm">
                                    <span id="solarSpeedLabel" class="text-sm font-medium">1.0x</span>
                                    <span id="solarSpeedArrow"
                                        class="material-symbols-outlined text-[20px] text-slate-400 transition-transform duration-200">expand_more</span>
                                </button>

                                <!-- Dropdown Menu -->
                                <div id="solarSpeedMenu"
                                    class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-50 overflow-hidden">
                                    <div class="max-h-60 overflow-y-auto py-1 custom-scrollbar">
                                        <div onclick="setSolarSpeed(0.1)"
                                            class="speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="0.1">
                                            <span>0.1x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setSolarSpeed(0.5)"
                                            class="speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="0.5">
                                            <span>0.5x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setSolarSpeed(1.0)"
                                            class="speed-option px-3 py-2 text-sm text-blue-600 bg-blue-50 font-medium cursor-pointer transition-colors flex items-center justify-between border-b border-slate-100 last:border-b-0"
                                            data-value="1.0">
                                            <span>1.0x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] text-blue-600">check</span>
                                        </div>
                                        <div onclick="setSolarSpeed(1.5)"
                                            class="speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.5">
                                            <span>1.5x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setSolarSpeed(2.0)"
                                            class="speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="2.0">
                                            <span>2.0x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setSolarSpeed(3.0)"
                                            class="speed-option px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="3.0">
                                            <span>3.0x</span>
                                            <span
                                                class="material-symbols-outlined text-[16px] opacity-0 text-blue-600">check</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Planets Grid -->
                <div id="planetsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Planet cards will be injected here by JS -->
                </div>

                <!-- 3D View Container -->
                <div id="solar3DContainer"
                    class="hidden bg-slate-900 rounded-xl border border-slate-700 shadow-lg overflow-hidden relative h-[400px] sm:h-[500px] md:h-[600px]">
                    <div id="solar3DCanvas" class="w-full h-full touch-none"></div>
                    <div
                        class="rounded-xl absolute bottom-2 left-2 sm:bottom-4 sm:left-4 bg-black/50 backdrop-blur-sm text-white p-2 sm:p-3 rounded-lg text-[10px] sm:text-xs max-w-[160px] sm:max-w-[200px] hidden sm:block">
                        <p class="font-semibold mb-1">Điều khiển:</p>
                        <ul class="list-disc list-inside space-y-1 text-slate-300">
                            <li>Xoay: 1 ngón</li>
                            <li>Zoom: 2 ngón</li>
                            <li>Di chuyển: 3 ngón</li>
                        </ul>
                    </div>
                    <div id="planetInfo3D"
                        class="absolute bg-slate-900/95 backdrop-blur-md text-white p-3 sm:p-4 rounded-xl w-[90%] max-w-[280px] sm:w-[280px] hidden transition-opacity duration-300 border border-blue-500/30 shadow-[0_0_20px_rgba(37,99,235,0.3)] z-10 pointer-events-none left-1/2 -translate-x-1/2 bottom-4 sm:left-0 sm:translate-x-0 sm:bottom-auto"
                        style="top: auto;">
                        <h3 id="p3dName"
                            class="text-base sm:text-xl font-bold text-blue-400 mb-2 flex items-center gap-2">
                            <span class="w-1.5 sm:w-2 h-6 sm:h-8 bg-blue-500 rounded-full block"></span>
                            Earth
                        </h3>
                        <p id="p3dDesc" class="text-[11px] sm:text-xs text-slate-300 leading-relaxed mb-2 sm:mb-3">
                            Description here...</p>
                        <div id="p3dStats"
                            class="grid grid-cols-2 gap-y-1.5 sm:gap-y-2 gap-x-3 sm:gap-x-4 text-[10px] sm:text-[11px] text-slate-400 border-t border-white/10 pt-2 sm:pt-3">
                            <!-- Stats injected via JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: ECLIPSE SIMULATOR -->
            <!-- Đã loại bỏ toàn bộ tab Mô Phỏng Nhật/Nguyệt Thực -->

            <!-- TAB: WORLD MAP -->
            <div id="tab-worldmap" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Khám phá</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Bản Đồ Thế Giới</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Search Controls & Map Type -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <div class="flex-1 relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="material-symbols-outlined text-slate-400 text-[18px]">search</span>
                            </div>
                            <input type="text" id="mapSearch" oninput="handleMapSearchInput(event)"
                                onfocus="showMapSuggestions()"
                                class="block w-full h-11 pl-10 pr-3 border border-slate-200 rounded-lg bg-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 text-sm transition"
                                placeholder="Tìm kiếm địa điểm... (ví dụ: Ha Noi, Vietnam)" autocomplete="off">
                            <!-- Suggestions Dropdown -->
                            <div id="mapSuggestions"
                                class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-[1000] max-h-60 overflow-y-auto">
                                <div id="mapSuggestionsList" class="py-1">
                                    <!-- Suggestions will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Map Type Selector (Combobox) -->
                        <div class="relative w-full sm:w-auto" style="min-width: 200px;">
                            <button id="mapTypeBtn" onclick="toggleMapTypeDropdown(event)"
                                class="h-11 flex items-center justify-between w-full px-4 bg-white text-slate-700 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/20 shadow-sm">
                                <div class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]"
                                        id="mapTypeIcon">streetview</span>
                                    <span class="text-sm font-medium" id="mapTypeText">Đường phố</span>
                                </div>
                                <span
                                    class="material-symbols-outlined text-[20px] text-slate-400 transition-transform duration-200"
                                    id="mapTypeArrow">expand_more</span>
                            </button>
                            <div id="mapTypeMenu"
                                class="hidden absolute top-full left-0 right-0 sm:right-auto sm:left-auto sm:min-w-[200px] mt-1 w-full bg-white border border-slate-200 rounded-lg shadow-xl z-[1000] overflow-hidden">
                                <button onclick="selectMapType('street', 'streetview', 'Đường phố')"
                                    class="w-full px-4 py-2.5 text-left hover:bg-slate-50 transition-colors flex items-center gap-2 text-sm text-slate-700 border-b border-slate-100 last:border-b-0">
                                    <span class="material-symbols-outlined text-[18px]">streetview</span>
                                    <span>Đường phố</span>
                                </button>
                                <button onclick="selectMapType('satellite', 'satellite_alt', 'Vệ tinh')"
                                    class="w-full px-4 py-2.5 text-left hover:bg-slate-50 transition-colors flex items-center gap-2 text-sm text-slate-700 border-b border-slate-100 last:border-b-0">
                                    <span class="material-symbols-outlined text-[18px]">satellite_alt</span>
                                    <span>Vệ tinh</span>
                                </button>
                                <button onclick="selectMapType('terrain', 'terrain', 'Địa hình')"
                                    class="w-full px-4 py-2.5 text-left hover:bg-slate-50 transition-colors flex items-center gap-2 text-sm text-slate-700 border-b border-slate-100 last:border-b-0">
                                    <span class="material-symbols-outlined text-[18px]">terrain</span>
                                    <span>Địa hình</span>
                                </button>
                                <button onclick="selectMapType('topo', 'landscape', 'Địa lý')"
                                    class="w-full px-4 py-2.5 text-left hover:bg-slate-50 transition-colors flex items-center gap-2 text-sm text-slate-700 border-b border-slate-100 last:border-b-0">
                                    <span class="material-symbols-outlined text-[18px]">landscape</span>
                                    <span>Địa lý</span>
                                </button>
                            </div>
                        </div>

                        <button onclick="searchLocation()"
                            class="h-11 px-5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 shadow-md">
                            <span class="material-symbols-outlined text-[20px]">my_location</span>
                            <span>Tìm kiếm</span>
                        </button>
                    </div>
                </div>

                <!-- Info Panel -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-blue-600" id="mapCoordinates">--</div>
                            <div class="text-xs text-slate-500">Tọa độ</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-600" id="mapZoom">--</div>
                            <div class="text-xs text-slate-500">Mức Zoom</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-purple-600" id="mapMarkers">0</div>
                            <div class="text-xs text-slate-500">Điểm đánh dấu</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-amber-600" id="mapClicks">0</div>
                            <div class="text-xs text-slate-500">Lượt click</div>
                        </div>
                    </div>
                </div>

                <!-- Map Container -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden relative z-0"
                    style="height: 600px;">
                    <div id="worldMap" class="w-full h-full"></div>
                </div>

                <!-- Map Info -->
                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-4">
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-blue-600 text-[20px]">info</span>
                        <div class="flex-1 text-sm text-slate-700">
                            <p class="font-semibold mb-2">Hướng dẫn sử dụng:</p>
                            <ul class="space-y-1 text-xs">
                                <li>• <strong>Di chuyển:</strong> Kéo thả chuột hoặc vuốt màn hình</li>
                                <li>• <strong>Phóng to/thu nhỏ:</strong> Cuộn chuột hoặc dùng nút +/- trên bản đồ</li>
                                <li>• <strong>Tìm kiếm:</strong> Nhập tên địa điểm và nhấn nút "Tìm kiếm"</li>
                                <li>• <strong>Chế độ xem:</strong> Chọn giữa Đường phố, Vệ tinh, Địa hình, hoặc Địa lý
                                </li>
                                <li>• <strong>Click vào bản đồ:</strong> Xem tọa độ và thông tin vị trí</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: BMI/BMR CALCULATOR -->
            <div id="tab-bmi" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tiện ích</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Công cụ tính
                                    BMI/BMR</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Input Section -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                        <h3 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2">
                            <span class="material-symbols-outlined text-blue-600">settings</span>
                            Thông số cơ thể
                        </h3>

                        <div class="space-y-5">
                            <!-- Gender -->
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Giới tính</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <label class="relative cursor-pointer">
                                        <input type="radio" name="gender" value="male" checked class="peer sr-only"
                                            onchange="calculateBMI()">
                                        <div
                                            class="p-3 rounded-lg border border-slate-200 text-center hover:bg-slate-50 peer-checked:bg-blue-50 peer-checked:border-blue-200 peer-checked:text-blue-600 transition-all">
                                            <span class="material-symbols-outlined mb-1">male</span>
                                            <div class="text-sm font-medium">Nam</div>
                                        </div>
                                    </label>
                                    <label class="relative cursor-pointer">
                                        <input type="radio" name="gender" value="female" class="peer sr-only"
                                            onchange="calculateBMI()">
                                        <div
                                            class="p-3 rounded-lg border border-slate-200 text-center hover:bg-slate-50 peer-checked:bg-pink-50 peer-checked:border-pink-200 peer-checked:text-pink-600 transition-all">
                                            <span class="material-symbols-outlined mb-1">female</span>
                                            <div class="text-sm font-medium">Nữ</div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Height & Weight -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Chiều cao (cm)</label>
                                    <div class="relative">
                                        <input type="number" id="bmiHeight" value="170"
                                            class="w-full pl-4 pr-10 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
                                            oninput="calculateBMI()">
                                        <span class="absolute right-3 top-2.5 text-slate-400 text-sm">cm</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Cân nặng (kg)</label>
                                    <div class="relative">
                                        <input type="number" id="bmiWeight" value="65"
                                            class="w-full pl-4 pr-10 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
                                            oninput="calculateBMI()">
                                        <span class="absolute right-3 top-2.5 text-slate-400 text-sm">kg</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Age -->
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Tuổi</label>
                                <input type="number" id="bmiAge" value="25"
                                    class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
                                    oninput="calculateBMI()">
                            </div>

                            <!-- Activity Level -->
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Mức độ vận động</label>
                                <div class="relative">
                                    <button id="bmiActivityBtn" onclick="toggleActivityDropdown()"
                                        class="w-full px-4 py-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all flex items-center justify-between text-left shadow-sm hover:bg-slate-50">
                                        <span id="bmiActivityLabel" class="text-slate-700 text-sm">Ít vận động (Làm việc
                                            văn phòng)</span>
                                        <span id="bmiActivityArrow"
                                            class="material-symbols-outlined text-slate-400 text-[20px] transition-transform duration-200">expand_more</span>
                                    </button>

                                    <!-- Custom Dropdown Menu -->
                                    <div id="bmiActivityMenu"
                                        class="hidden absolute top-full left-0 mt-1 w-full bg-white border border-slate-200 rounded-lg shadow-xl z-50 overflow-hidden max-h-60 overflow-y-auto custom-scrollbar">
                                        <div onclick="setActivityLevel(1.2, 'Ít vận động (Làm việc văn phòng)')"
                                            class="activity-option px-4 py-2.5 text-sm text-blue-600 bg-blue-50 font-medium cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.2">
                                            <span>Ít vận động (Làm việc văn phòng)</span>
                                            <span
                                                class="material-symbols-outlined text-[18px] text-blue-600">check</span>
                                        </div>
                                        <div onclick="setActivityLevel(1.375, 'Nhẹ (Tập 1-3 ngày/tuần)')"
                                            class="activity-option px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.375">
                                            <span>Nhẹ (Tập 1-3 ngày/tuần)</span>
                                            <span
                                                class="material-symbols-outlined text-[18px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setActivityLevel(1.55, 'Vừa phải (Tập 3-5 ngày/tuần)')"
                                            class="activity-option px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.55">
                                            <span>Vừa phải (Tập 3-5 ngày/tuần)</span>
                                            <span
                                                class="material-symbols-outlined text-[18px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setActivityLevel(1.725, 'Năng động (Tập 6-7 ngày/tuần)')"
                                            class="activity-option px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.725">
                                            <span>Năng động (Tập 6-7 ngày/tuần)</span>
                                            <span
                                                class="material-symbols-outlined text-[18px] opacity-0 text-blue-600">check</span>
                                        </div>
                                        <div onclick="setActivityLevel(1.9, 'Rất năng động (Tập nặng/Lao động)')"
                                            class="activity-option px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 cursor-pointer transition-colors flex items-center justify-between group border-b border-slate-100 last:border-b-0"
                                            data-value="1.9">
                                            <span>Rất năng động (Tập nặng/Lao động)</span>
                                            <span
                                                class="material-symbols-outlined text-[18px] opacity-0 text-blue-600">check</span>
                                        </div>
                                    </div>
                                    <!-- Hidden input to store value -->
                                    <input type="hidden" id="bmiActivity" value="1.2">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Result Section -->
                    <div class="space-y-6">
                        <!-- BMI Result -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-green-600">monitor_weight</span>
                                Chỉ số BMI
                            </h3>
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <div class="text-4xl font-bold text-slate-800 mb-1" id="bmiValue">--</div>
                                    <div class="text-sm font-medium px-3 py-1 rounded-full inline-block" id="bmiStatus">
                                        --</div>
                                </div>
                                <div class="w-16 h-16 rounded-full border-4 border-slate-100 flex items-center justify-center"
                                    id="bmiCircle">
                                    <span
                                        class="material-symbols-outlined text-3xl text-slate-300">accessibility_new</span>
                                </div>
                            </div>
                            <div class="w-full bg-slate-100 rounded-full h-2.5 mb-2 overflow-hidden">
                                <div id="bmiProgress"
                                    class="h-2.5 rounded-full transition-all duration-500 bg-slate-300"
                                    style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-xs text-slate-400">
                                <span>Thiếu cân</span>
                                <span>Bình thường</span>
                                <span>Thừa cân</span>
                                <span>Béo phì</span>
                            </div>
                        </div>

                        <!-- BMR/TDEE Result -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-orange-600">local_fire_department</span>
                                Nhu cầu Calo (TDEE)
                            </h3>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-orange-50 rounded-lg p-4 text-center">
                                    <div class="text-xs text-orange-600 font-semibold uppercase mb-1">BMR (Cơ bản)</div>
                                    <div class="text-2xl font-bold text-slate-800" id="bmrValue">--</div>
                                    <div class="text-xs text-slate-500">kcal/ngày</div>
                                </div>
                                <div class="bg-blue-50 rounded-lg p-4 text-center">
                                    <div class="text-xs text-blue-600 font-semibold uppercase mb-1">TDEE (Thực tế)</div>
                                    <div class="text-2xl font-bold text-slate-800" id="tdeeValue">--</div>
                                    <div class="text-xs text-slate-500">kcal/ngày</div>
                                </div>
                            </div>
                            <div class="mt-4 text-sm text-slate-500 leading-relaxed">
                                <p class="mb-2"><strong class="text-slate-700">BMR:</strong> Năng lượng tối thiểu để duy
                                    trì sự sống.</p>
                                <p><strong class="text-slate-700">TDEE:</strong> Tổng năng lượng tiêu thụ dựa trên mức
                                    độ vận động của bạn.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: PASSWORD GENERATOR -->
            <div id="tab-password" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tiện ích</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tạo Mật Khẩu</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Main Content: 2 Column Layout -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- LEFT COLUMN: Settings -->
                    <div class="flex flex-col gap-6">
                        <!-- Length Settings -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 h-full">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-blue-600">straighten</span>
                                Độ dài mật khẩu
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-slate-600">Độ dài:</span>
                                    <span id="passwordLengthValue" class="text-lg font-bold text-blue-600">16</span>
                                </div>
                                <input type="range" id="passwordLength" min="6" max="64" value="16"
                                    class="custom-range w-full" oninput="updatePasswordLength(); generatePassword()">
                                <div class="flex justify-between text-xs text-slate-500">
                                    <span>6</span>
                                    <span>64</span>
                                </div>
                            </div>
                        </div>

                        <!-- Character Options -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex-1">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-purple-600">tune</span>
                                Tùy chọn ký tự
                            </h3>
                            <div class="space-y-3">
                                <!-- First Row: Uppercase and Lowercase on desktop, stacked on mobile -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
                                    <label
                                        class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" id="includeUppercase" checked class="custom-checkbox"
                                            onchange="generatePassword()">
                                        <span class="text-sm text-slate-700">Chữ hoa (A-Z)</span>
                                    </label>
                                    <label
                                        class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" id="includeLowercase" checked class="custom-checkbox"
                                            onchange="generatePassword()">
                                        <span class="text-sm text-slate-700">Chữ thường (a-z)</span>
                                    </label>
                                </div>

                                <!-- Second Row: Numbers and Symbols on desktop, stacked on mobile -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
                                    <label
                                        class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" id="includeNumbers" checked class="custom-checkbox"
                                            onchange="generatePassword()">
                                        <span class="text-sm text-slate-700">Số (0-9)</span>
                                    </label>
                                    <label
                                        class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" id="includeSymbols" checked class="custom-checkbox"
                                            onchange="generatePassword()">
                                        <span class="text-sm text-slate-700">Ký tự đặc biệt (!@#$%^&*)</span>
                                    </label>
                                </div>
                                <!-- Third Row -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
                                    <label
                                        class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" id="excludeSimilar" class="custom-checkbox"
                                            onchange="generatePassword()">
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">Loại ký tự giống nhau</div>
                                            <div class="text-xs text-slate-500">Loại bỏ i, l, 1, L, o, 0, O</div>
                                        </div>
                                    </label>
                                    <label
                                        class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                        <input type="checkbox" id="excludeAmbiguous" class="custom-checkbox"
                                            onchange="generatePassword()">
                                        <div>
                                            <div class="text-sm font-medium text-slate-700">Loại ký tự gây nhầm lẫn
                                            </div>
                                            <div class="text-xs text-slate-500">Loại bỏ {}, [], (), /, \, ', ", `, ~, ,,
                                                ., ;, :</div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT COLUMN: Password Display -->
                    <div class="flex flex-col gap-6">
                        <!-- Password Display -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-green-600">key</span>
                                Mật khẩu đã tạo
                            </h3>
                            <div class="relative">
                                <input type="text" id="generatedPassword" readonly
                                    class="w-full p-4 pr-12 bg-slate-50 border-2 border-slate-200 rounded-xl font-mono text-lg text-slate-800 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all"
                                    placeholder="Mật khẩu sẽ hiển thị ở đây...">
                                <button onclick="copyPassword(event)"
                                    class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors flex items-center justify-center group">
                                    <span class="material-symbols-outlined text-[20px]">content_copy</span>
                                </button>
                            </div>

                            <!-- Password Strength Indicator -->
                            <div class="mt-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-slate-600">Độ mạnh mật khẩu:</span>
                                    <span id="strengthText" class="text-sm font-bold text-slate-400">---</span>
                                </div>
                                <div class="w-full h-2 bg-slate-100 rounded-full overflow-hidden">
                                    <div id="strengthBar" class="h-full bg-slate-300 transition-all duration-500"
                                        style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Buttons -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <div class="flex flex-col gap-3">
                                <button onclick="generateMultiplePasswords()"
                                    class="w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-semibold text-base transition-all duration-300 flex items-center justify-center gap-2 shadow-md hover:shadow-lg">
                                    <span class="material-symbols-outlined">list</span>
                                    Tạo nhiều mật khẩu
                                </button>
                            </div>
                        </div>

                        <!-- Tips Card -->
                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-6 flex-1">
                            <h4 class="text-base font-bold text-slate-800 mb-3 flex items-center gap-2">
                                <span class="material-symbols-outlined text-blue-600">lightbulb</span>
                                Mẹo tạo mật khẩu mạnh
                            </h4>
                            <ul class="space-y-2 text-sm text-slate-600">
                                <li class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-[18px] text-blue-600 mt-0.5">check_circle</span>
                                    <span>Sử dụng ít nhất 12-16 ký tự</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-[18px] text-blue-600 mt-0.5">check_circle</span>
                                    <span>Kết hợp nhiều loại ký tự</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-[18px] text-blue-600 mt-0.5">check_circle</span>
                                    <span>Không dùng lại cho nhiều tài khoản</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-[18px] text-blue-600 mt-0.5">check_circle</span>
                                    <span>Dùng trình quản lý mật khẩu</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Multiple Passwords Display (Full Width) -->
                <div id="multiplePasswordsContainer"
                    class="hidden bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-blue-600">list</span>
                        Danh sách mật khẩu
                    </h3>
                    <div id="passwordsList" class="space-y-2 max-h-96 overflow-y-auto custom-scrollbar"></div>
                </div>
            </div>

            <!-- TAB: DIFF CHECKER -->
            <div id="tab-diff" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4">
                <nav class="flex mb-4" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Tiện ích</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">So Sánh Văn Bản</span>
                            </div>
                        </li>
                    </ol>
                </nav>

                <!-- Control Panel -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4">
                        <!-- Checkboxes on the left -->
                        <div
                            class="flex flex-col lg:flex-row lg:flex-wrap gap-3 lg:gap-4 items-start lg:items-center w-full lg:w-auto">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="diffIgnoreCase" class="custom-checkbox" checked>
                                <span class="text-sm text-slate-700">Bỏ qua hoa/thường</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="diffIgnoreWhitespace" class="custom-checkbox">
                                <span class="text-sm text-slate-700">Bỏ qua khoảng trắng</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="diffShowLineNumbers" class="custom-checkbox" checked>
                                <span class="text-sm text-slate-700">Hiển thị số dòng</span>
                            </label>
                        </div>

                        <!-- Buttons on the right -->
                        <div class="flex flex-wrap gap-2 w-full lg:w-auto">
                            <button onclick="compareDiff()"
                                class="flex-1 lg:flex-initial px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 shadow-md">
                                <span class="material-symbols-outlined text-[18px]">compare</span>
                                So sánh
                            </button>
                            <button onclick="swapDiffTexts()"
                                class="flex-1 lg:flex-initial px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">swap_horiz</span>
                                Đảo
                            </button>
                            <button onclick="clearDiff()"
                                class="flex-1 lg:flex-initial px-4 py-2 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">delete</span>
                                Xóa
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Legend -->
                <div class="bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-4">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm">
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-green-200 border border-green-400 rounded"></div>
                            <span class="text-slate-700"><strong>Xanh lá:</strong> Dòng được thêm mới</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-red-200 border border-red-400 rounded"></div>
                            <span class="text-slate-700"><strong>Đỏ:</strong> Dòng bị xóa</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-yellow-200 border border-yellow-400 rounded"></div>
                            <span class="text-slate-700"><strong>Vàng:</strong> Dòng có thay đổi</span>
                        </div>
                    </div>
                </div>
                <!-- Input Areas -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Left Input -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 flex flex-col">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold text-slate-800 flex items-center gap-2">
                                <span class="material-symbols-outlined text-blue-600 text-[20px]">article</span>
                                Văn bản gốc
                            </h4>
                            <button onclick="clearDiffText('left')"
                                class="text-xs text-slate-500 hover:text-slate-700 flex items-center gap-1">
                                <span class="material-symbols-outlined text-[16px]">close</span>
                                Xóa
                            </button>
                        </div>
                        <div class="flex-1 relative min-h-[600px]">
                            <textarea id="diffTextLeft"
                                class="absolute inset-0 w-full h-full p-4 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none font-mono text-sm resize-none transition-all"
                                placeholder="Dán văn bản hoặc code gốc vào đây..."></textarea>
                            <div id="diffOutputLeft" onscroll="syncDiffScroll('left')"
                                class="absolute inset-0 p-4 bg-slate-50 border border-slate-200 rounded-lg font-mono text-sm overflow-auto custom-scrollbar hidden">
                            </div>
                        </div>
                        <div class="mt-2 text-xs text-slate-500">
                            <span id="diffLeftLines">0</span> dòng, <span id="diffLeftChars">0</span> ký tự
                        </div>
                    </div>

                    <!-- Right Input -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4 flex flex-col">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold text-slate-800 flex items-center gap-2">
                                <span class="material-symbols-outlined text-green-600 text-[20px]">article</span>
                                Văn bản so sánh
                            </h4>
                            <button onclick="clearDiffText('right')"
                                class="text-xs text-slate-500 hover:text-slate-700 flex items-center gap-1">
                                <span class="material-symbols-outlined text-[16px]">close</span>
                                Xóa
                            </button>
                        </div>
                        <div class="flex-1 relative min-h-[600px]">
                            <textarea id="diffTextRight"
                                class="absolute inset-0 w-full h-full p-4 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none font-mono text-sm resize-none transition-all"
                                placeholder="Dán văn bản hoặc code cần so sánh vào đây..."></textarea>
                            <div id="diffOutputRight" onscroll="syncDiffScroll('right')"
                                class="absolute inset-0 p-4 bg-slate-50 border border-slate-200 rounded-lg font-mono text-sm overflow-auto custom-scrollbar hidden">
                            </div>
                        </div>
                        <div class="mt-2 text-xs text-slate-500">
                            <span id="diffRightLines">0</span> dòng, <span id="diffRightChars">0</span> ký tự
                        </div>
                    </div>
                </div>

                <!-- Summary Stats (Hidden by default) -->
                <div id="diffResults" class="hidden bg-white rounded-xl border border-slate-200 shadow-sm p-4">
                    <h4 class="font-semibold text-slate-800 mb-3 flex items-center gap-2">
                        <span class="material-symbols-outlined text-purple-600">analytics</span>
                        Thống kê so sánh
                    </h4>
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                        <div class="text-center p-3 bg-green-50 rounded-lg">
                            <div class="text-2xl font-bold text-green-600" id="diffAddedCount">0</div>
                            <div class="text-xs text-slate-600">Dòng thêm</div>
                        </div>
                        <div class="text-center p-3 bg-red-50 rounded-lg">
                            <div class="text-2xl font-bold text-red-600" id="diffRemovedCount">0</div>
                            <div class="text-xs text-slate-600">Dòng xóa</div>
                        </div>
                        <div class="text-center p-3 bg-yellow-50 rounded-lg">
                            <div class="text-2xl font-bold text-yellow-600" id="diffChangedCount">0</div>
                            <div class="text-xs text-slate-600">Dòng thay đổi</div>
                        </div>
                        <div class="text-center p-3 bg-blue-50 rounded-lg">
                            <div class="text-2xl font-bold text-blue-600" id="diffSimilarity">100%</div>
                            <div class="text-xs text-slate-600">Độ giống nhau</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: JSON FORMATTER -->
            <div id="tab-json" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4 h-full flex flex-col">
                <nav class="flex mb-4 shrink-0" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Lập Trình</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">JSON Formatter</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <div class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 h-full min-h-[500px]">
                    <!-- Input Section -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex flex-col h-full">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                <span class="material-symbols-outlined text-blue-600">code</span>
                                JSON Input
                            </h3>
                            <div class="flex gap-2">
                                <button onclick="formatJSON()"
                                    class="px-3 py-1.5 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg text-xs font-medium transition-colors flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">format_align_left</span>
                                    Làm đẹp
                                </button>
                                <button onclick="minifyJSON()"
                                    class="px-3 py-1.5 bg-slate-100 text-slate-600 hover:bg-slate-200 rounded-lg text-xs font-medium transition-colors flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">compress</span>
                                    Thu gọn
                                </button>
                            </div>
                        </div>
                        <textarea id="jsonInput"
                            class="flex-1 w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none font-mono text-sm resize-none transition-all"
                            placeholder="Paste your JSON here..."></textarea>
                    </div>

                    <!-- Output Section -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex flex-col h-full">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                <span class="material-symbols-outlined text-green-600">terminal</span>
                                Kết quả
                            </h3>
                            <button onclick="copyJSON()"
                                class="px-3 py-1.5 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 rounded-lg text-xs font-medium transition-colors flex items-center gap-1 shadow-sm">
                                <span class="material-symbols-outlined text-[16px]">content_copy</span>
                                Sao chép
                            </button>
                        </div>
                        <div class="relative flex-1">
                            <textarea id="jsonOutput" readonly
                                class="w-full h-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-mono text-sm resize-none text-slate-800"
                                placeholder="Result will appear here..."></textarea>
                            <div id="jsonError"
                                class="hidden absolute bottom-4 left-4 right-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-start gap-2 shadow-lg animate-fade-in">
                                <span class="material-symbols-outlined text-[20px] shrink-0 mt-0.5">error</span>
                                <span id="jsonErrorMessage" class="font-mono text-xs break-all">Error message</span>
                                <button onclick="document.getElementById('jsonError').classList.add('hidden')"
                                    class="ml-auto text-red-400 hover:text-red-600">
                                    <span class="material-symbols-outlined text-[18px]">close</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: CSS GENERATOR -->
            <div id="tab-css" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4 h-full flex flex-col">
                <nav class="flex mb-4 shrink-0" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Lập Trình</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Trình Tạo CSS</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- Tool Selector -->
                <div
                    class="bg-white rounded-xl border border-slate-200 shadow-sm p-2 flex flex-nowrap gap-1 sm:gap-2 shrink-0">
                    <button onclick="switchCssTool('shadow')" id="btn-css-shadow"
                        class="css-tool-btn active flex-1 px-1 sm:px-4 py-2 rounded-lg text-[10px] sm:text-sm font-medium transition-all flex items-center justify-center gap-1 sm:gap-2 bg-blue-50 text-blue-600 ring-1 ring-blue-200 whitespace-nowrap">
                        <span class="material-symbols-outlined text-[14px] sm:text-[18px]">shadow</span> <span
                            class="hidden sm:inline">Box</span>Shadow
                    </button>
                    <button onclick="switchCssTool('gradient')" id="btn-css-gradient"
                        class="css-tool-btn flex-1 px-1 sm:px-4 py-2 rounded-lg text-[10px] sm:text-sm font-medium transition-all flex items-center justify-center gap-1 sm:gap-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 whitespace-nowrap">
                        <span class="material-symbols-outlined text-[14px] sm:text-[18px]">gradient</span>Gradient
                    </button>
                    <button onclick="switchCssTool('radius')" id="btn-css-radius"
                        class="css-tool-btn flex-1 px-1 sm:px-4 py-2 rounded-lg text-[10px] sm:text-sm font-medium transition-all flex items-center justify-center gap-1 sm:gap-2 text-slate-600 hover:bg-slate-50 hover:text-slate-900 whitespace-nowrap">
                        <span class="material-symbols-outlined text-[14px] sm:text-[18px]">rounded_corner</span> <span
                            class="hidden sm:inline">Border</span>Radius
                    </button>
                </div>

                <div class="flex-1 grid grid-cols-1 lg:grid-cols-12 gap-6 h-full min-h-[500px] overflow-hidden">
                    <!-- Controls Section (Left) -->
                    <div
                        class="lg:col-span-4 bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex flex-col h-full overflow-y-auto custom-scrollbar">
                        <h3
                            class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2 sticky top-0 bg-white z-10 pb-2 border-b border-slate-100">
                            <span class="material-symbols-outlined text-blue-600">tune</span>
                            Cấu hình
                        </h3>

                        <!-- Shadow Controls -->
                        <div id="controls-shadow" class="css-controls space-y-5">
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">Shift Right (X)</label>
                                    <span id="val-shadow-x" class="text-slate-400 font-mono">0px</span>
                                </div>
                                <input type="range" id="shadow-x" min="-50" max="50" value="0"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">Shift Down (Y)</label>
                                    <span id="val-shadow-y" class="text-slate-400 font-mono">10px</span>
                                </div>
                                <input type="range" id="shadow-y" min="-50" max="50" value="10"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">Blur</label>
                                    <span id="val-shadow-blur" class="text-slate-400 font-mono">15px</span>
                                </div>
                                <input type="range" id="shadow-blur" min="0" max="100" value="15"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">Spread</label>
                                    <span id="val-shadow-spread" class="text-slate-400 font-mono">-3px</span>
                                </div>
                                <input type="range" id="shadow-spread" min="-50" max="50" value="-3"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">Opacity</label>
                                    <span id="val-shadow-opacity" class="text-slate-400 font-mono">0.1</span>
                                </div>
                                <input type="range" id="shadow-opacity" min="0" max="1" step="0.01" value="0.1"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>
                            <div class="flex items-center justify-between pt-2">
                                <label class="text-slate-600 font-medium text-sm">Color</label>
                                <input type="color" id="shadow-color" value="#000000"
                                    class="h-8 w-14 rounded cursor-pointer border-0 bg-transparent p-0"
                                    oninput="updateCSS()">
                            </div>
                            <div class="flex items-center gap-2 pt-2">
                                <!-- <input type="checkbox" id="shadow-inset" class="w-4 h-4 text-blue-600 bg-slate-100 border-slate-300 rounded focus:ring-blue-500" onchange="updateCSS()"> -->
                                <input id="shadow-inset" type="checkbox" onchange="updateCSS()" class="custom-checkbox">
                                <label for="shadow-inset"
                                    class="text-slate-600 font-medium text-sm select-none">Inset</label>
                            </div>
                        </div>

                        <!-- Gradient Controls -->
                        <div id="controls-gradient" class="css-controls hidden space-y-5">
                            <div class="space-y-2 relative">
                                <label class="text-slate-600 font-medium text-sm">Type</label>
                                <input type="hidden" id="gradient-type" value="linear">
                                <button type="button" onclick="toggleGradientTypeDropdown()" id="gradient-type-btn"
                                    class="w-full bg-white border border-slate-200 rounded-lg py-2.5 px-3 text-left text-sm font-medium text-slate-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 flex items-center justify-between transition-all hover:bg-slate-50">
                                    <span id="gradient-type-label">Linear</span>
                                    <span
                                        class="material-symbols-outlined text-slate-400 text-[20px] transition-transform duration-200"
                                        id="gradient-type-arrow">expand_more</span>
                                </button>
                                <ul id="gradient-type-menu"
                                    class="hidden absolute z-20 mt-1 w-full bg-white shadow-xl max-h-60 rounded-lg py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm animate-fade-in-fast border border-slate-100">
                                    <li class="text-slate-900 cursor-pointer select-none relative py-2.5 pl-3 pr-9 hover:bg-blue-50 transition-colors"
                                        onclick="selectGradientType('linear', 'Linear')">
                                        <span class="font-normal block truncate">Linear</span>
                                        <span id="check-linear"
                                            class="text-blue-600 absolute inset-y-0 right-0 flex items-center pr-4">
                                            <span class="material-symbols-outlined text-[18px]">check</span>
                                        </span>
                                    </li>
                                    <li class="text-slate-900 cursor-pointer select-none relative py-2.5 pl-3 pr-9 hover:bg-blue-50 transition-colors"
                                        onclick="selectGradientType('radial', 'Radial')">
                                        <span class="font-normal block truncate">Radial</span>
                                        <span id="check-radial"
                                            class="text-blue-600 absolute inset-y-0 right-0 flex items-center pr-4 hidden">
                                            <span class="material-symbols-outlined text-[18px]">check</span>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="space-y-2" id="gradient-angle-group">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">Angle</label>
                                    <span id="val-gradient-angle" class="text-slate-400 font-mono">135deg</span>
                                </div>
                                <input type="range" id="gradient-angle" min="0" max="360" value="135"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>
                            <div class="space-y-3 pt-2">
                                <label class="text-slate-600 font-medium text-sm">Colors</label>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">Start</span>
                                    <input type="color" id="gradient-color1" value="#3b82f6"
                                        class="h-8 w-14 rounded cursor-pointer border-0 bg-transparent p-0"
                                        oninput="updateCSS()">
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">End</span>
                                    <input type="color" id="gradient-color2" value="#8b5cf6"
                                        class="h-8 w-14 rounded cursor-pointer border-0 bg-transparent p-0"
                                        oninput="updateCSS()">
                                </div>
                            </div>
                        </div>

                        <!-- Radius Controls -->
                        <div id="controls-radius" class="css-controls hidden space-y-5">
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <label class="text-slate-600 font-medium">All Corners</label>
                                    <span id="val-radius-all" class="text-slate-400 font-mono">12px</span>
                                </div>
                                <input type="range" id="radius-all" min="0" max="100" value="12"
                                    class="custom-range w-full" oninput="updateCSS()">
                            </div>

                            <div class="border-t border-slate-100 my-4"></div>

                            <div class="flex items-center justify-between mb-4">
                                <label class="text-slate-600 font-medium text-sm">Individual Corners</label>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="radius-individual" class="sr-only peer"
                                        onchange="updateCSS()">
                                    <div
                                        class="w-9 h-5 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600">
                                    </div>
                                </label>
                            </div>

                            <div id="radius-individual-controls"
                                class="space-y-4 opacity-50 pointer-events-none transition-opacity">
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <label class="text-slate-600 font-medium">Top Left</label>
                                        <span id="val-radius-tl" class="text-slate-400 font-mono">0px</span>
                                    </div>
                                    <input type="range" id="radius-tl" min="0" max="100" value="0"
                                        class="custom-range w-full" oninput="updateCSS()">
                                </div>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <label class="text-slate-600 font-medium">Top Right</label>
                                        <span id="val-radius-tr" class="text-slate-400 font-mono">0px</span>
                                    </div>
                                    <input type="range" id="radius-tr" min="0" max="100" value="0"
                                        class="custom-range w-full" oninput="updateCSS()">
                                </div>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <label class="text-slate-600 font-medium">Bottom Right</label>
                                        <span id="val-radius-br" class="text-slate-400 font-mono">0px</span>
                                    </div>
                                    <input type="range" id="radius-br" min="0" max="100" value="0"
                                        class="custom-range w-full" oninput="updateCSS()">
                                </div>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <label class="text-slate-600 font-medium">Bottom Left</label>
                                        <span id="val-radius-bl" class="text-slate-400 font-mono">0px</span>
                                    </div>
                                    <input type="range" id="radius-bl" min="0" max="100" value="0"
                                        class="custom-range w-full" oninput="updateCSS()">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Preview & Output Section (Right) -->
                    <div class="lg:col-span-8 flex flex-col gap-6 h-full">
                        <!-- Preview -->
                        <div
                            class="flex-1 bg-white rounded-xl border border-slate-200 shadow-sm p-8 flex items-center justify-center relative overflow-hidden">
                            <!-- Grid Background -->
                            <div class="absolute inset-0 opacity-40"
                                style="background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 20px 20px;">
                            </div>

                            <div id="css-preview-box"
                                class="w-48 h-48 bg-white border border-slate-200 flex items-center justify-center transition-all duration-200 shadow-sm">
                                <span class="text-slate-400 font-medium select-none">Preview</span>
                            </div>
                        </div>

                        <!-- Code Output -->
                        <div class="bg-slate-800 rounded-xl shadow-sm p-0 flex flex-col overflow-hidden shrink-0">
                            <div
                                class="flex items-center justify-between px-4 py-2.5 bg-slate-900/50 border-b border-slate-700">
                                <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">CSS Code</span>
                                <button onclick="copyCssCode()"
                                    class="text-slate-400 hover:text-white transition-colors flex items-center gap-1 text-xs font-medium">
                                    <span class="material-symbols-outlined text-[16px]">content_copy</span>
                                    Sao chép
                                </button>
                            </div>
                            <textarea id="css-output" readonly
                                class="w-full h-28 p-4 bg-transparent text-blue-300 font-mono text-sm outline-none resize-none"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: REGEX TESTER -->
            <div id="tab-regex" class="tab-content hidden w-full space-y-5 animate-fade-in pb-4 h-full flex flex-col">
                <nav class="flex mb-4 shrink-0" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="#" onclick="switchTab('home')"
                                class="inline-flex items-center text-sm font-medium text-slate-700 hover:text-blue-600">
                                <span class="material-symbols-outlined text-[20px] mr-2">home</span>
                                Trang chủ
                            </a>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Lập Trình</span>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-slate-400 text-[20px]">chevron_right</span>
                                <span class="ml-1 text-sm font-medium text-slate-500 md:ml-2">Regex Tester</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <!-- How to Use Card -->
                <div
                    class="bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-6 shadow-sm">
                    <div class="flex items-start gap-4">
                        <div
                            class="w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center shrink-0 shadow-lg">
                            <span class="material-symbols-outlined text-white text-[28px]">help</span>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg font-bold text-slate-800 mb-3 flex items-center gap-2">
                                Cách sử dụng Regex Tester
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-700">
                                <div class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-purple-600 text-[20px] shrink-0 mt-0.5">looks_one</span>
                                    <div>
                                        <strong class="text-slate-800">Nhập Pattern:</strong> Nhập biểu thức chính quy
                                        (regex) vào ô <span
                                            class="font-mono bg-white px-1.5 py-0.5 rounded border border-slate-200">/pattern/</span>
                                    </div>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-purple-600 text-[20px] shrink-0 mt-0.5">looks_two</span>
                                    <div>
                                        <strong class="text-slate-800">Chọn Flags:</strong> Tích các cờ (g: toàn bộ, i:
                                        không phân biệt hoa/thường, m: nhiều dòng)
                                    </div>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-purple-600 text-[20px] shrink-0 mt-0.5">looks_3</span>
                                    <div>
                                        <strong class="text-slate-800">Nhập Text:</strong> Nhập văn bản cần kiểm tra vào
                                        ô <em>Test String</em>
                                    </div>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span
                                        class="material-symbols-outlined text-purple-600 text-[20px] shrink-0 mt-0.5">looks_4</span>
                                    <div>
                                        <strong class="text-slate-800">Xem Kết quả:</strong> Các kết quả khớp sẽ được tô
                                        sáng màu xanh và hiển thị chi tiết
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 flex flex-wrap items-center gap-3">
                                <span class="text-xs font-semibold text-purple-700 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">star</span>
                                    Mẹo:
                                </span>
                                <span
                                    class="text-xs bg-white text-slate-600 px-3 py-1.5 rounded-full border border-slate-200">Sử
                                    dụng <strong>Quick Patterns</strong> để chọn mẫu có sẵn</span>
                                <span
                                    class="text-xs bg-white text-slate-600 px-3 py-1.5 rounded-full border border-slate-200">Tham
                                    khảo <strong>Quick Reference</strong> để học cú pháp</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 h-full min-h-[500px]">
                    <!-- Left Column: Input & Settings -->
                    <div class="flex flex-col gap-6">
                        <!-- Regex Pattern -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-purple-600">code_blocks</span>
                                Regular Expression
                            </h3>
                            <div class="space-y-4">
                                <div class="relative">
                                    <span
                                        class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-mono text-lg">/</span>
                                    <input type="text" id="regexPattern"
                                        class="w-full pl-8 pr-8 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none font-mono text-base transition-all"
                                        placeholder="Enter regex pattern" value="\w+@\w+\.\w+" oninput="testRegex()">
                                    <span
                                        class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-mono text-lg">/</span>
                                </div>

                                <!-- Flags -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Flags</label>
                                    <div class="flex flex-wrap gap-2">
                                        <label
                                            class="flex items-center gap-2 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors">
                                            <input id="flag-g" type="checkbox" onchange="testRegex()"
                                                class="custom-checkbox">
                                            <span class="text-sm font-mono font-medium text-slate-700">g</span>
                                            <span class="text-xs text-slate-500">Global</span>
                                        </label>
                                        <label
                                            class="flex items-center gap-2 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors">
                                            <input id="flag-i" type="checkbox" onchange="testRegex()"
                                                class="custom-checkbox">
                                            <span class="text-sm font-mono font-medium text-slate-700">i</span>
                                            <span class="text-xs text-slate-500">Ignore Case</span>
                                        </label>
                                        <label
                                            class="flex items-center gap-2 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors">
                                            <input id="flag-m" type="checkbox" onchange="testRegex()"
                                                class="custom-checkbox">
                                            <span class="text-sm font-mono font-medium text-slate-700">m</span>
                                            <span class="text-xs text-slate-500">Multiline</span>
                                        </label>
                                        <label
                                            class="flex items-center gap-2 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors">
                                            <input id="flag-s" type="checkbox" onchange="testRegex()"
                                                class="custom-checkbox">
                                            <span class="text-sm font-mono font-medium text-slate-700">s</span>
                                            <span class="text-xs text-slate-500">Dotall</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Quick Patterns -->
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Quick Patterns</label>
                                    <div class="relative">
                                        <button onclick="toggleRegexPatternsDropdown()" id="regex-patterns-btn"
                                            class="w-full px-4 py-2.5 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all flex items-center justify-between text-left shadow-sm hover:bg-slate-50">
                                            <span id="regex-patterns-label" class="text-slate-700 text-sm">Select a
                                                pattern...</span>
                                            <span id="regex-patterns-arrow"
                                                class="material-symbols-outlined text-slate-400 text-[20px] transition-transform duration-200">expand_more</span>
                                        </button>

                                        <div id="regex-patterns-menu"
                                            class="hidden absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-50 max-h-60 overflow-y-auto custom-scrollbar">
                                            <div onclick="selectRegexPattern('\\w+@\\w+\\.\\w+', 'Email')"
                                                class="px-4 py-2.5 text-sm text-slate-600 hover:bg-purple-50 hover:text-purple-700 cursor-pointer transition-colors border-b border-slate-100 last:border-b-0">
                                                <div class="font-medium break-words">Email</div>
                                                <div class="text-xs text-slate-400 font-mono break-all">\w+@\w+\.\w+</div>
                                            </div>
                                            <div onclick="selectRegexPattern('^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)$', 'URL')"
                                                class="px-4 py-2.5 text-sm text-slate-600 hover:bg-purple-50 hover:text-purple-700 cursor-pointer transition-colors border-b border-slate-100 last:border-b-0">
                                                <div class="font-medium break-words">URL</div>
                                                <div class="text-xs text-slate-400 font-mono break-all">^https?://...</div>
                                            </div>
                                            <div onclick="selectRegexPattern('^\\d{3}-?\\d{3}-?\\d{4}$', 'Phone (US)')"
                                                class="px-4 py-2.5 text-sm text-slate-600 hover:bg-purple-50 hover:text-purple-700 cursor-pointer transition-colors border-b border-slate-100 last:border-b-0">
                                                <div class="font-medium break-words">Phone (US)</div>
                                                <div class="text-xs text-slate-400 font-mono break-all">^\d{3}-?\d{3}-?\d{4}$
                                                </div>
                                            </div>
                                            <div onclick="selectRegexPattern('^\\d{4}-\\d{2}-\\d{2}$', 'Date (YYYY-MM-DD)')"
                                                class="px-4 py-2.5 text-sm text-slate-600 hover:bg-purple-50 hover:text-purple-700 cursor-pointer transition-colors border-b border-slate-100 last:border-b-0">
                                                <div class="font-medium break-words">Date (YYYY-MM-DD)</div>
                                                <div class="text-xs text-slate-400 font-mono break-all">^\d{4}-\d{2}-\d{2}$</div>
                                            </div>
                                            <div onclick="selectRegexPattern('^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$', 'Hex Color')"
                                                class="px-4 py-2.5 text-sm text-slate-600 hover:bg-purple-50 hover:text-purple-700 cursor-pointer transition-colors border-b border-slate-100 last:border-b-0">
                                                <div class="font-medium break-words">Hex Color</div>
                                                <div class="text-xs text-slate-400 font-mono break-all">^#?([a-fA-F0-9]{6}...)
                                                </div>
                                            </div>
                                            <div onclick="selectRegexPattern('^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$', 'Strong Password')"
                                                class="px-4 py-2.5 text-sm text-slate-600 hover:bg-purple-50 hover:text-purple-700 cursor-pointer transition-colors border-b border-slate-100 last:border-b-0">
                                                <div class="font-medium break-words">Strong Password</div>
                                                <div class="text-xs text-slate-400 font-mono break-all">^(?=.*[a-z])(?=.*[A-Z])...
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Test String -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex-1 flex flex-col">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-blue-600">text_fields</span>
                                Test String
                            </h3>
                            <textarea id="regexTestString"
                                class="flex-1 w-full p-4 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none font-mono text-sm resize-none transition-all"
                                placeholder="Enter text to test against the regex..." oninput="testRegex()">john@example.com
user123@test.org
invalid-email@
contact@domain.co.uk</textarea>
                        </div>
                    </div>

                    <!-- Right Column: Results -->
                    <div class="flex flex-col gap-6">
                        <!-- Match Results -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 flex-1 flex flex-col">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-green-600">check_circle</span>
                                    Matches
                                </h3>
                                <span id="regexMatchCount"
                                    class="px-3 py-1 bg-green-50 text-green-700 text-xs font-bold rounded-full">0</span>
                            </div>

                            <div id="regexHighlighted"
                                class="flex-1 w-full p-4 bg-slate-50 border border-slate-200 rounded-lg font-mono text-sm overflow-auto custom-scrollbar whitespace-pre-wrap break-words">
                                <span class="text-slate-400">Matches will be highlighted here...</span>
                            </div>
                        </div>

                        <!-- Match Details -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-orange-600">info</span>
                                Match Details
                            </h3>
                            <div id="regexDetails" class="space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar">
                                <div class="text-sm text-slate-500">No matches yet. Enter a pattern and test string.
                                </div>
                            </div>
                        </div>

                        <!-- Regex Info -->
                        <div class="bg-purple-50 border border-purple-100 rounded-xl p-4">
                            <h4 class="text-sm font-bold text-purple-800 mb-2 flex items-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">lightbulb</span>
                                Quick Reference
                            </h4>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="font-mono text-purple-700"><span class="font-bold">\d</span> - Digit</div>
                                <div class="font-mono text-purple-700"><span class="font-bold">\w</span> - Word char
                                </div>
                                <div class="font-mono text-purple-700"><span class="font-bold">\s</span> - Whitespace
                                </div>
                                <div class="font-mono text-purple-700"><span class="font-bold">.</span> - Any char</div>
                                <div class="font-mono text-purple-700"><span class="font-bold">+</span> - One or more
                                </div>
                                <div class="font-mono text-purple-700"><span class="font-bold">*</span> - Zero or more
                                </div>
                                <div class="font-mono text-purple-700"><span class="font-bold">?</span> - Optional</div>
                                <div class="font-mono text-purple-700"><span class="font-bold">^</span> - Start</div>
                                <div class="font-mono text-purple-700"><span class="font-bold">$</span> - End</div>
                                <div class="font-mono text-purple-700"><span class="font-bold">[ ]</span> - Character
                                    set</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>

        <footer class="py-2 text-center text-xs text-slate-400 border-t border-slate-100/50">
            <div class="text-xs text-slate-500 mt-2">
                Designed and developed by Nguyen The Hoang
            </div>
        </footer>

        <!-- Toast Container -->
        <div id="toastContainer" class="fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none">
            <!-- Toasts will be inserted here -->
        </div>

        <!-- Scroll to Top Button -->
        <button id="scrollToTopBtn" onclick="scrollToTop()"
            class="fixed bottom-6 right-6 w-12 h-12 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 flex items-center justify-center z-50 opacity-0 pointer-events-none hover:scale-110 active:scale-95">
            <span class="material-symbols-outlined text-[24px]">arrow_upward</span>
        </button>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
    <script src="script.js"></script>
</body>

</html>